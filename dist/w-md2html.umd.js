/*!
 * w-md2html v1.0.17
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("path"),require("fs"),require("sharp"),require("marked"),require("marked-katex-extension"),require("marked-footnote"),require("highlight.js"),require("marked-highlight"),require("cheerio")):"function"==typeof define&&define.amd?define(["path","fs","sharp","marked","marked-katex-extension","marked-footnote","highlight.js","marked-highlight","cheerio"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-md2html"]=e(t.path,t.fs,t.sharp,t.marked,t["marked-katex-extension"],t["marked-footnote"],t.highlight.js,t["marked-highlight"],t.cheerio)}(this,function(t,e,r,n,i,o,a,u,c){"use strict";function s(t){var e=Object.create(null);return t&&Object.keys(t).forEach(function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}}),e.default=t,Object.freeze(e)}var l=s(c),f=Array.isArray,p="object"==typeof global&&global&&global.Object===Object&&global,h="object"==typeof self&&self&&self.Object===Object&&self,d=p||h||Function("return this")(),y=d.Symbol,g=Object.prototype,b=g.hasOwnProperty,v=g.toString,_=y?y.toStringTag:void 0;var m=Object.prototype.toString;var j=y?y.toStringTag:void 0;function w(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":j&&j in Object(t)?function(t){var e=b.call(t,_),r=t[_];try{t[_]=void 0;var n=!0}catch(t){}var i=v.call(t);return n&&(e?t[_]=r:delete t[_]),i}(t):function(t){return m.call(t)}(t)}function S(t){return null!=t&&"object"==typeof t}function O(t){return"symbol"==typeof t||S(t)&&"[object Symbol]"==w(t)}var x=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,T=/^\w*$/;function A(t,e){if(f(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!O(t))||(T.test(t)||!x.test(t)||null!=e&&t in Object(e))}function E(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function k(t){if(!E(t))return!1;var e=w(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var z,N=d["__core-js_shared__"],B=(z=/[^.]+$/.exec(N&&N.keys&&N.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"";var $=Function.prototype.toString;function H(t){if(null!=t){try{return $.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var C=/^\[object .+?Constructor\]$/,P=Function.prototype,F=Object.prototype,D=P.toString,R=F.hasOwnProperty,I=RegExp("^"+D.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function L(t){return!(!E(t)||(e=t,B&&B in e))&&(k(t)?I:C).test(H(t));var e}function M(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return L(r)?r:void 0}var W=M(Object,"create");var U=Object.prototype.hasOwnProperty;var q=Object.prototype.hasOwnProperty;function G(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function V(t,e){return t===e||t!=t&&e!=e}function J(t,e){for(var r=t.length;r--;)if(V(t[r][0],e))return r;return-1}G.prototype.clear=function(){this.__data__=W?W(null):{},this.size=0},G.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},G.prototype.get=function(t){var e=this.__data__;if(W){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return U.call(e,t)?e[t]:void 0},G.prototype.has=function(t){var e=this.__data__;return W?void 0!==e[t]:q.call(e,t)},G.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=W&&void 0===e?"__lodash_hash_undefined__":e,this};var Q=Array.prototype.splice;function K(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}K.prototype.clear=function(){this.__data__=[],this.size=0},K.prototype.delete=function(t){var e=this.__data__,r=J(e,t);return!(r<0)&&(r==e.length-1?e.pop():Q.call(e,r,1),--this.size,!0)},K.prototype.get=function(t){var e=this.__data__,r=J(e,t);return r<0?void 0:e[r][1]},K.prototype.has=function(t){return J(this.__data__,t)>-1},K.prototype.set=function(t,e){var r=this.__data__,n=J(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};var X=M(d,"Map");function Y(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function Z(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Z.prototype.clear=function(){this.size=0,this.__data__={hash:new G,map:new(X||K),string:new G}},Z.prototype.delete=function(t){var e=Y(this,t).delete(t);return this.size-=e?1:0,e},Z.prototype.get=function(t){return Y(this,t).get(t)},Z.prototype.has=function(t){return Y(this,t).has(t)},Z.prototype.set=function(t,e){var r=Y(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function tt(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(tt.Cache||Z),r}tt.Cache=Z;var et,rt,nt,it=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ot=/\\(\\)?/g,at=(et=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(it,function(t,r,n,i){e.push(n?i.replace(ot,"$1"):r||t)}),e},rt=tt(et,function(t){return 500===nt.size&&nt.clear(),t}),nt=rt.cache,rt),ut=at;function ct(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var st=y?y.prototype:void 0,lt=st?st.toString:void 0;function ft(t){if("string"==typeof t)return t;if(f(t))return ct(t,ft)+"";if(O(t))return lt?lt.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function pt(t){return null==t?"":ft(t)}function ht(t,e){return f(t)?t:A(t,e)?[t]:ut(pt(t))}function dt(t){if("string"==typeof t||O(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function yt(t,e){for(var r=0,n=(e=ht(e,t)).length;null!=t&&r<n;)t=t[dt(e[r++])];return r&&r==n?t:void 0}function gt(t,e,r){var n=null==t?void 0:yt(t,e);return void 0===n?r:n}function bt(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}var vt,_t=function(t,e,r){for(var n=-1,i=Object(t),o=r(t),a=o.length;a--;){var u=o[vt?a:++n];if(!1===e(i[u],u,i))break}return t};function mt(t){return S(t)&&"[object Arguments]"==w(t)}var jt=Object.prototype,wt=jt.hasOwnProperty,St=jt.propertyIsEnumerable,Ot=mt(function(){return arguments}())?mt:function(t){return S(t)&&wt.call(t,"callee")&&!St.call(t,"callee")},xt=Ot;var Tt="object"==typeof exports&&exports&&!exports.nodeType&&exports,At=Tt&&"object"==typeof module&&module&&!module.nodeType&&module,Et=At&&At.exports===Tt?d.Buffer:void 0,kt=(Et?Et.isBuffer:void 0)||function(){return!1},zt=/^(?:0|[1-9]\d*)$/;function Nt(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&zt.test(t))&&t>-1&&t%1==0&&t<e}function Bt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}var $t={};function Ht(t){return function(e){return t(e)}}$t["[object Float32Array]"]=$t["[object Float64Array]"]=$t["[object Int8Array]"]=$t["[object Int16Array]"]=$t["[object Int32Array]"]=$t["[object Uint8Array]"]=$t["[object Uint8ClampedArray]"]=$t["[object Uint16Array]"]=$t["[object Uint32Array]"]=!0,$t["[object Arguments]"]=$t["[object Array]"]=$t["[object ArrayBuffer]"]=$t["[object Boolean]"]=$t["[object DataView]"]=$t["[object Date]"]=$t["[object Error]"]=$t["[object Function]"]=$t["[object Map]"]=$t["[object Number]"]=$t["[object Object]"]=$t["[object RegExp]"]=$t["[object Set]"]=$t["[object String]"]=$t["[object WeakMap]"]=!1;var Ct="object"==typeof exports&&exports&&!exports.nodeType&&exports,Pt=Ct&&"object"==typeof module&&module&&!module.nodeType&&module,Ft=Pt&&Pt.exports===Ct&&p.process,Dt=function(){try{var t=Pt&&Pt.require&&Pt.require("util").types;return t||Ft&&Ft.binding&&Ft.binding("util")}catch(t){}}(),Rt=Dt&&Dt.isTypedArray,It=Rt?Ht(Rt):function(t){return S(t)&&Bt(t.length)&&!!$t[w(t)]},Lt=Object.prototype.hasOwnProperty;function Mt(t,e){var r=f(t),n=!r&&xt(t),i=!r&&!n&&kt(t),o=!r&&!n&&!i&&It(t),a=r||n||i||o,u=a?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],c=u.length;for(var s in t)!e&&!Lt.call(t,s)||a&&("length"==s||i&&("offset"==s||"parent"==s)||o&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Nt(s,c))||u.push(s);return u}var Wt=Object.prototype;var Ut=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),qt=Ut,Gt=Object.prototype.hasOwnProperty;function Vt(t){if(r=(e=t)&&e.constructor,e!==("function"==typeof r&&r.prototype||Wt))return qt(t);var e,r,n=[];for(var i in Object(t))Gt.call(t,i)&&"constructor"!=i&&n.push(i);return n}function Jt(t){return null!=t&&Bt(t.length)&&!k(t)}function Qt(t){return Jt(t)?Mt(t):Vt(t)}var Kt=function(t,e){return function(r,n){if(null==r)return r;if(!Jt(r))return t(r,n);for(var i=r.length,o=e?i:-1,a=Object(r);(e?o--:++o<i)&&!1!==n(a[o],o,a););return r}}(function(t,e){return t&&_t(t,e,Qt)}),Xt=Kt;function Yt(t){return t}function Zt(t,e){var r;return(f(t)?bt:Xt)(t,"function"==typeof(r=e)?r:Yt)}function te(t){var e=this.__data__=new K(t);this.size=e.size}te.prototype.clear=function(){this.__data__=new K,this.size=0},te.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},te.prototype.get=function(t){return this.__data__.get(t)},te.prototype.has=function(t){return this.__data__.has(t)},te.prototype.set=function(t,e){var r=this.__data__;if(r instanceof K){var n=r.__data__;if(!X||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Z(n)}return r.set(t,e),this.size=r.size,this};function ee(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Z;++e<r;)this.add(t[e])}function re(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function ne(t,e){return t.has(e)}ee.prototype.add=ee.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},ee.prototype.has=function(t){return this.__data__.has(t)};function ie(t,e,r,n,i,o){var a=1&r,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var s=o.get(t),l=o.get(e);if(s&&l)return s==e&&l==t;var f=-1,p=!0,h=2&r?new ee:void 0;for(o.set(t,e),o.set(e,t);++f<u;){var d=t[f],y=e[f];if(n)var g=a?n(y,d,f,e,t,o):n(d,y,f,t,e,o);if(void 0!==g){if(g)continue;p=!1;break}if(h){if(!re(e,function(t,e){if(!ne(h,e)&&(d===t||i(d,t,r,n,o)))return h.push(e)})){p=!1;break}}else if(d!==y&&!i(d,y,r,n,o)){p=!1;break}}return o.delete(t),o.delete(e),p}var oe=d.Uint8Array;function ae(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function ue(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var ce=y?y.prototype:void 0,se=ce?ce.valueOf:void 0;var le=Object.prototype.propertyIsEnumerable,fe=Object.getOwnPropertySymbols,pe=fe?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,i=0,o=[];++r<n;){var a=t[r];e(a,r,t)&&(o[i++]=a)}return o}(fe(t),function(e){return le.call(t,e)}))}:function(){return[]},he=pe;function de(t){return function(t,e,r){var n=e(t);return f(t)?n:function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}(n,r(t))}(t,Qt,he)}var ye=Object.prototype.hasOwnProperty;var ge=M(d,"DataView"),be=M(d,"Promise"),ve=M(d,"Set"),_e=M(d,"WeakMap"),me="[object Map]",je="[object Promise]",we="[object Set]",Se="[object WeakMap]",Oe="[object DataView]",xe=H(ge),Te=H(X),Ae=H(be),Ee=H(ve),ke=H(_e),ze=w;(ge&&ze(new ge(new ArrayBuffer(1)))!=Oe||X&&ze(new X)!=me||be&&ze(be.resolve())!=je||ve&&ze(new ve)!=we||_e&&ze(new _e)!=Se)&&(ze=function(t){var e=w(t),r="[object Object]"==e?t.constructor:void 0,n=r?H(r):"";if(n)switch(n){case xe:return Oe;case Te:return me;case Ae:return je;case Ee:return we;case ke:return Se}return e});var Ne=ze,Be="[object Arguments]",$e="[object Array]",He="[object Object]",Ce=Object.prototype.hasOwnProperty;function Pe(t,e,r,n,i,o){var a=f(t),u=f(e),c=a?$e:Ne(t),s=u?$e:Ne(e),l=(c=c==Be?He:c)==He,p=(s=s==Be?He:s)==He,h=c==s;if(h&&kt(t)){if(!kt(e))return!1;a=!0,l=!1}if(h&&!l)return o||(o=new te),a||It(t)?ie(t,e,r,n,i,o):function(t,e,r,n,i,o,a){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new oe(t),new oe(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return V(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var u=ae;case"[object Set]":var c=1&n;if(u||(u=ue),t.size!=e.size&&!c)return!1;var s=a.get(t);if(s)return s==e;n|=2,a.set(t,e);var l=ie(u(t),u(e),n,i,o,a);return a.delete(t),l;case"[object Symbol]":if(se)return se.call(t)==se.call(e)}return!1}(t,e,c,r,n,i,o);if(!(1&r)){var d=l&&Ce.call(t,"__wrapped__"),y=p&&Ce.call(e,"__wrapped__");if(d||y){var g=d?t.value():t,b=y?e.value():e;return o||(o=new te),i(g,b,r,n,o)}}return!!h&&(o||(o=new te),function(t,e,r,n,i,o){var a=1&r,u=de(t),c=u.length;if(c!=de(e).length&&!a)return!1;for(var s=c;s--;){var l=u[s];if(!(a?l in e:ye.call(e,l)))return!1}var f=o.get(t),p=o.get(e);if(f&&p)return f==e&&p==t;var h=!0;o.set(t,e),o.set(e,t);for(var d=a;++s<c;){var y=t[l=u[s]],g=e[l];if(n)var b=a?n(g,y,l,e,t,o):n(y,g,l,t,e,o);if(!(void 0===b?y===g||i(y,g,r,n,o):b)){h=!1;break}d||(d="constructor"==l)}if(h&&!d){var v=t.constructor,_=e.constructor;v==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _||(h=!1)}return o.delete(t),o.delete(e),h}(t,e,r,n,i,o))}function Fe(t,e,r,n,i){return t===e||(null==t||null==e||!S(t)&&!S(e)?t!=t&&e!=e:Pe(t,e,r,n,Fe,i))}function De(t){return t==t&&!E(t)}function Re(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}function Ie(t){var e=function(t){for(var e=Qt(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,De(i)]}return e}(t);return 1==e.length&&e[0][2]?Re(e[0][0],e[0][1]):function(r){return r===t||function(t,e,r,n){var i=r.length,o=i,a=!n;if(null==t)return!o;for(t=Object(t);i--;){var u=r[i];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<o;){var c=(u=r[i])[0],s=t[c],l=u[1];if(a&&u[2]){if(void 0===s&&!(c in t))return!1}else{var f=new te;if(n)var p=n(s,l,c,t,e,f);if(!(void 0===p?Fe(l,s,3,n,f):p))return!1}}return!0}(r,t,e)}}function Le(t,e){return null!=t&&e in Object(t)}function Me(t,e){return null!=t&&function(t,e,r){for(var n=-1,i=(e=ht(e,t)).length,o=!1;++n<i;){var a=dt(e[n]);if(!(o=null!=t&&r(t,a)))break;t=t[a]}return o||++n!=i?o:!!(i=null==t?0:t.length)&&Bt(i)&&Nt(a,i)&&(f(t)||xt(t))}(t,e,Le)}function We(t){return function(e){return null==e?void 0:e[t]}}function Ue(t){return A(t)?We(dt(t)):function(t){return function(e){return yt(e,t)}}(t)}function qe(t){return"function"==typeof t?t:null==t?Yt:"object"==typeof t?f(t)?function(t,e){return A(t)&&De(e)?Re(dt(t),e):function(r){var n=gt(r,t);return void 0===n&&n===e?Me(r,t):Fe(e,n,3)}}(t[0],t[1]):Ie(t):Ue(t)}function Ge(t,e){var r=-1,n=Jt(t)?Array(t.length):[];return Xt(t,function(t,i,o){n[++r]=e(t,i,o)}),n}function Ve(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(r=r>i?i:r)<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}function Je(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:Ve(t,e,r)}var Qe=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Ke(t){return Qe.test(t)}var Xe=Dt&&Dt.isRegExp,Ye=Xe?Ht(Xe):function(t){return S(t)&&"[object RegExp]"==w(t)};var Ze="\\ud800-\\udfff",tr="["+Ze+"]",er="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",rr="\\ud83c[\\udffb-\\udfff]",nr="[^"+Ze+"]",ir="(?:\\ud83c[\\udde6-\\uddff]){2}",or="[\\ud800-\\udbff][\\udc00-\\udfff]",ar="(?:"+er+"|"+rr+")"+"?",ur="[\\ufe0e\\ufe0f]?",cr=ur+ar+("(?:\\u200d(?:"+[nr,ir,or].join("|")+")"+ur+ar+")*"),sr="(?:"+[nr+er+"?",er,ir,or,tr].join("|")+")",lr=RegExp(rr+"(?="+rr+")|"+sr+cr,"g");function fr(t){return Ke(t)?function(t){return t.match(lr)||[]}(t):function(t){return t.split("")}(t)}function pr(t,e,r){return r&&"number"!=typeof r&&function(t,e,r){if(!E(r))return!1;var n=typeof e;return!!("number"==n?Jt(r)&&Nt(e,r.length):"string"==n&&e in r)&&V(r[e],t)}(t,e,r)&&(e=r=void 0),(r=void 0===r?4294967295:r>>>0)?(t=pt(t))&&("string"==typeof e||null!=e&&!Ye(e))&&!(e=ft(e))&&Ke(t)?Je(fr(t),0,r):t.split(e,r):[]}var hr=/\s/;var dr=/^\s+/;function yr(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&hr.test(t.charAt(e)););return e}(t)+1).replace(dr,""):t}function gr(t){return t!=t}function br(t,e,r){return e==e?function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}(t,e,r):function(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}(t,gr,r)}function vr(t,e,r){if((t=pt(t))&&(r||void 0===e))return yr(t);if(!t||!(e=ft(e)))return t;var n=fr(t),i=fr(e),o=function(t,e){for(var r=-1,n=t.length;++r<n&&br(e,t[r],0)>-1;);return r}(n,i),a=function(t,e){for(var r=t.length;r--&&br(e,t[r],0)>-1;);return r}(n,i)+1;return Je(n,o,a).join("")}var _r=Array.prototype.join;function mr(t,e){return null==t?"":_r.call(t,e)}var jr=/^[-+]0x[0-9a-f]+$/i,wr=/^0b[01]+$/i,Sr=/^0o[0-7]+$/i,Or=parseInt;function xr(t){if("number"==typeof t)return t;if(O(t))return NaN;if(E(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=E(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=yr(t);var r=wr.test(t);return r||Sr.test(t)?Or(t.slice(2),r?2:8):jr.test(t)?NaN:+t}var Tr=1/0;function Ar(t){return t?(t=xr(t))===Tr||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function Er(t){var e=Ar(t),r=e%1;return e==e?r?e-r:e:0}function kr(t,e,r){var n=null==t?0:t.length;return n?Ve(t,(e=r||void 0===e?1:Er(e))<0?0:e,n):[]}var zr=We("length"),Nr="\\ud800-\\udfff",Br="["+Nr+"]",$r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Hr="\\ud83c[\\udffb-\\udfff]",Cr="[^"+Nr+"]",Pr="(?:\\ud83c[\\udde6-\\uddff]){2}",Fr="[\\ud800-\\udbff][\\udc00-\\udfff]",Dr="(?:"+$r+"|"+Hr+")"+"?",Rr="[\\ufe0e\\ufe0f]?",Ir=Rr+Dr+("(?:\\u200d(?:"+[Cr,Pr,Fr].join("|")+")"+Rr+Dr+")*"),Lr="(?:"+[Cr+$r+"?",$r,Pr,Fr,Br].join("|")+")",Mr=RegExp(Hr+"(?="+Hr+")|"+Lr+Ir,"g");function Wr(t){return Ke(t)?function(t){for(var e=Mr.lastIndex=0;Mr.test(t);)++e;return e}(t):zr(t)}function Ur(t){if(null==t)return 0;if(Jt(t))return"string"==typeof(e=t)||!f(e)&&S(e)&&"[object String]"==w(e)?Wr(t):t.length;var e,r=Ne(t);return"[object Map]"==r||"[object Set]"==r?t.size:Vt(t).length}function qr(t){return!0===(e=t)||!1===e||S(e)&&"[object Boolean]"==w(e);var e}function Gr(t){return"[object String]"===Object.prototype.toString.call(t)}function Vr(t){return!(!Gr(t)||""===t)}function Jr(t){return"[object Array]"===Object.prototype.toString.call(t)}function Qr(t){return"[object Object]"===Object.prototype.toString.call(t)}function Kr(t){return t!=t}function Xr(t){return!!function(t){return"[object Undefined]"===Object.prototype.toString.call(t)}(t)||(!!function(t){return"[object Null]"===Object.prototype.toString.call(t)}(t)||(!!function(t){if(Qr(t)){for(let e in t)return!1;return!0}return!1}(t)||(!!function(t){return!(!Gr(t)||""!==t)}(t)||(!!function(t){return!!Jr(t)&&0===t.length}(t)||!!Kr(t)))))}function Yr(t){let e=!1;if(Vr(t))e=!isNaN(Number(t));else if(function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)){if(Kr(t))return!1;e=!0}return e}function Zr(t){let e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e}function tn(t){if(!Yr(t))return 0;return Ar(t)}function en(t,e,r){if(!Vr(t))return"";if(!Vr(e))return"";if(!Gr(r))return"";return String(t).replaceAll(e,r)}var rn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function nn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var on={exports:{}};!function(t,e){!function(){if("string"!=typeof __filename||"string"!=typeof __dirname){if(this.Tautologistics){if(this.Tautologistics.NodeHtmlParser)return}else this.Tautologistics={};this.Tautologistics.NodeHtmlParser={},e=this.Tautologistics.NodeHtmlParser}var t,r,n,i={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag"};function o(t,e){this._options=e||{},null==this._options.includeLocation&&(this._options.includeLocation=!1),this.validateHandler(t),this._handler=t,this.reset()}function a(t){a.super_.call(this,t,{ignoreWhitespace:!0,verbose:!1,enforceEmptyTags:!1})}function u(t,e){this.reset(),this._options=e||{},null==this._options.ignoreWhitespace&&(this._options.ignoreWhitespace=!1),null==this._options.verbose&&(this._options.verbose=!0),null==this._options.enforceEmptyTags&&(this._options.enforceEmptyTags=!0),"function"==typeof t&&(this._callback=t)}o._reTrim=/(^\s+|\s+$)/g,o._reTrimComment=/(^\!--|--$)/g,o._reWhitespace=/\s/g,o._reTagName=/^\s*(\/?)\s*([^\s\/]+)/,o._reAttrib=/([^=<>\"\'\s]+)\s*=\s*"([^"]*)"|([^=<>\"\'\s]+)\s*=\s*'([^']*)'|([^=<>\"\'\s]+)\s*=\s*([^'"\s]+)|([^=<>\"\'\s\/]+)/g,o._reTags=/[\<\>]/g,o.prototype.parseComplete=function(t){this.reset(),this.parseChunk(t),this.done()},o.prototype.parseChunk=function(t){this._done&&this.handleError(new Error("Attempted to parse chunk after parsing already done")),this._buffer+=t,this.parseTags()},o.prototype.done=function(){if(!this._done){if(this._done=!0,this._buffer.length){var t=this._buffer;this._buffer="";var e={raw:t,data:this._parseState==i.Text?t:t.replace(o._reTrim,""),type:this._parseState};this._parseState!=i.Tag&&this._parseState!=i.Script&&this._parseState!=i.Style||(e.name=this.parseTagName(e.data)),this.parseAttribs(e),this._elements.push(e)}this.writeHandler(),this._handler.done()}},o.prototype.reset=function(){this._buffer="",this._done=!1,this._elements=[],this._elementsCurrent=0,this._current=0,this._next=0,this._location={row:0,col:0,charOffset:0,inBuffer:0},this._parseState=i.Text,this._prevTagSep="",this._tagStack=[],this._handler.reset()},o.prototype._options=null,o.prototype._handler=null,o.prototype._buffer=null,o.prototype._done=!1,o.prototype._elements=null,o.prototype._elementsCurrent=0,o.prototype._current=0,o.prototype._next=0,o.prototype._location=null,o.prototype._parseState=i.Text,o.prototype._prevTagSep="",o.prototype._tagStack=null,o.prototype.parseTagAttribs=function(t){for(var e=t.length,r=0;r<e;){var n=t[r++];n.type!=i.Tag&&n.type!=i.Script&&n.type!=i.style||this.parseAttribs(n)}return t},o.prototype.parseAttribs=function(t){if(t.type==i.Script||t.type==i.Style||t.type==i.Tag){var e,r=t.data.split(o._reWhitespace,1)[0],n=t.data.substring(r.length);if(!(n.length<1))for(o._reAttrib.lastIndex=0;e=o._reAttrib.exec(n);)null==t.attribs&&(t.attribs={}),"string"==typeof e[1]&&e[1].length?t.attribs[e[1]]=e[2]:"string"==typeof e[3]&&e[3].length?t.attribs[e[3].toString()]=e[4].toString():"string"==typeof e[5]&&e[5].length?t.attribs[e[5]]=e[6]:"string"==typeof e[7]&&e[7].length&&(t.attribs[e[7]]=e[7])}},o.prototype.parseTagName=function(t){if(null==t||""==t)return"";var e=o._reTagName.exec(t);return e?(e[1]?"/":"")+e[2]:""},o.prototype.parseTags=function(){for(var t=this._buffer.length-1;o._reTags.test(this._buffer);){this._next=o._reTags.lastIndex-1;var e=this._buffer.charAt(this._next),r=this._buffer.substring(this._current,this._next),n={raw:r,data:this._parseState==i.Text?r:r.replace(o._reTrim,""),type:this._parseState},a=this.parseTagName(n.data);if(this._tagStack.length)if(this._tagStack[this._tagStack.length-1]==i.Script){if("/script"==a.toLowerCase())this._tagStack.pop();else if(0!=n.raw.indexOf("!--"))if(n.type=i.Text,this._elements.length&&this._elements[this._elements.length-1].type==i.Text)(u=this._elements[this._elements.length-1]).raw=u.data=u.raw+this._prevTagSep+n.raw,n.raw=n.data=""}else if(this._tagStack[this._tagStack.length-1]==i.Style){if("/style"==a.toLowerCase())this._tagStack.pop();else if(0!=n.raw.indexOf("!--"))if(n.type=i.Text,this._elements.length&&this._elements[this._elements.length-1].type==i.Text){var u=this._elements[this._elements.length-1];""!=n.raw?(u.raw=u.data=u.raw+this._prevTagSep+n.raw,n.raw=n.data=""):u.raw=u.data=u.raw+this._prevTagSep}else""!=n.raw&&(n.raw=n.data=n.raw)}else if(this._tagStack[this._tagStack.length-1]==i.Comment){var c=n.raw.length;if("-"==n.raw.charAt(c-2)&&"-"==n.raw.charAt(c-1)&&">"==e)if(this._tagStack.pop(),this._elements.length&&this._elements[this._elements.length-1].type==i.Comment)(u=this._elements[this._elements.length-1]).raw=u.data=(u.raw+n.raw).replace(o._reTrimComment,""),n.raw=n.data="",n.type=i.Text;else n.type=i.Comment;else if(n.type=i.Comment,this._elements.length&&this._elements[this._elements.length-1].type==i.Comment)(u=this._elements[this._elements.length-1]).raw=u.data=u.raw+n.raw+e,n.raw=n.data="",n.type=i.Text;else n.raw=n.data=n.raw+e}if(n.type==i.Tag){n.name=a;var s=a.toLowerCase();if(0==n.raw.indexOf("!--")){n.type=i.Comment,delete n.name;c=n.raw.length;"-"==n.raw.charAt(c-1)&&"-"==n.raw.charAt(c-2)&&">"==e?n.raw=n.data=n.raw.replace(o._reTrimComment,""):(n.raw+=e,this._tagStack.push(i.Comment))}else 0==n.raw.indexOf("!")||0==n.raw.indexOf("?")?n.type=i.Directive:"script"==s?(n.type=i.Script,"/"!=n.data.charAt(n.data.length-1)&&this._tagStack.push(i.Script)):"/script"==s?n.type=i.Script:"style"==s?(n.type=i.Style,"/"!=n.data.charAt(n.data.length-1)&&this._tagStack.push(i.Style)):"/style"==s&&(n.type=i.Style);n.name&&"/"==n.name.charAt(0)&&(n.data=n.name)}""==n.raw&&n.type==i.Text||(this._options.includeLocation&&!n.location&&(n.location=this.getLocation(n.type==i.Tag)),this.parseAttribs(n),this._elements.push(n),n.type!=i.Text&&n.type!=i.Comment&&n.type!=i.Directive&&"/"==n.data.charAt(n.data.length-1)&&this._elements.push({raw:"/"+n.name,data:"/"+n.name,name:"/"+n.name,type:n.type})),this._parseState="<"==e?i.Tag:i.Text,this._current=this._next+1,this._prevTagSep=e}this._options.includeLocation&&(this.getLocation(),this._location.row+=this._location.inBuffer,this._location.inBuffer=0,this._location.charOffset=0),this._buffer=this._current<=t?this._buffer.substring(this._current):"",this._current=0,this.writeHandler()},o.prototype.getLocation=function(t){for(var e,r=this._location,n=this._current-(t?1:0),i=t&&0==r.charOffset&&0==this._current;r.charOffset<n;r.charOffset++)"\n"==(e=this._buffer.charAt(r.charOffset))?(r.inBuffer++,r.col=0):"\r"!=e&&r.col++;return{line:r.row+r.inBuffer+1,col:r.col+(i?0:1)}},o.prototype.validateHandler=function(t){if("object"!=typeof t)throw new Error("Handler is not an object");if("function"!=typeof t.reset)throw new Error("Handler method 'reset' is invalid");if("function"!=typeof t.done)throw new Error("Handler method 'done' is invalid");if("function"!=typeof t.writeTag)throw new Error("Handler method 'writeTag' is invalid");if("function"!=typeof t.writeText)throw new Error("Handler method 'writeText' is invalid");if("function"!=typeof t.writeComment)throw new Error("Handler method 'writeComment' is invalid");if("function"!=typeof t.writeDirective)throw new Error("Handler method 'writeDirective' is invalid")},o.prototype.writeHandler=function(t){if(t=!!t,!this._tagStack.length||t)for(;this._elements.length;){var e=this._elements.shift();switch(e.type){case i.Comment:this._handler.writeComment(e);break;case i.Directive:this._handler.writeDirective(e);break;case i.Text:this._handler.writeText(e);break;default:this._handler.writeTag(e)}}},o.prototype.handleError=function(t){if("function"!=typeof this._handler.error)throw t;this._handler.error(t)},t=a,(n=function(){}).prototype=(r=u).prototype,t.super_=r,t.prototype=new n,t.prototype.constructor=t,a.prototype.done=function(){var t,e={},r=c.getElementsByTagName(function(t){return"rss"==t||"feed"==t},this.dom,!1);if(r.length&&(t=r[0]),t){if("rss"==t.name){e.type="rss",t=t.children[0],e.id="";try{e.title=c.getElementsByTagName("title",t.children,!1)[0].children[0].data}catch(t){}try{e.link=c.getElementsByTagName("link",t.children,!1)[0].children[0].data}catch(t){}try{e.description=c.getElementsByTagName("description",t.children,!1)[0].children[0].data}catch(t){}try{e.updated=new Date(c.getElementsByTagName("lastBuildDate",t.children,!1)[0].children[0].data)}catch(t){}try{e.author=c.getElementsByTagName("managingEditor",t.children,!1)[0].children[0].data}catch(t){}e.items=[],c.getElementsByTagName("item",t.children).forEach(function(t,r,n){var i={};try{i.id=c.getElementsByTagName("guid",t.children,!1)[0].children[0].data}catch(t){}try{i.title=c.getElementsByTagName("title",t.children,!1)[0].children[0].data}catch(t){}try{i.link=c.getElementsByTagName("link",t.children,!1)[0].children[0].data}catch(t){}try{i.description=c.getElementsByTagName("description",t.children,!1)[0].children[0].data}catch(t){}try{i.pubDate=new Date(c.getElementsByTagName("pubDate",t.children,!1)[0].children[0].data)}catch(t){}e.items.push(i)})}else{e.type="atom";try{e.id=c.getElementsByTagName("id",t.children,!1)[0].children[0].data}catch(t){}try{e.title=c.getElementsByTagName("title",t.children,!1)[0].children[0].data}catch(t){}try{e.link=c.getElementsByTagName("link",t.children,!1)[0].attribs.href}catch(t){}try{e.description=c.getElementsByTagName("subtitle",t.children,!1)[0].children[0].data}catch(t){}try{e.updated=new Date(c.getElementsByTagName("updated",t.children,!1)[0].children[0].data)}catch(t){}try{e.author=c.getElementsByTagName("email",t.children,!0)[0].children[0].data}catch(t){}e.items=[],c.getElementsByTagName("entry",t.children).forEach(function(t,r,n){var i={};try{i.id=c.getElementsByTagName("id",t.children,!1)[0].children[0].data}catch(t){}try{i.title=c.getElementsByTagName("title",t.children,!1)[0].children[0].data}catch(t){}try{i.link=c.getElementsByTagName("link",t.children,!1)[0].attribs.href}catch(t){}try{i.description=c.getElementsByTagName("summary",t.children,!1)[0].children[0].data}catch(t){}try{i.pubDate=new Date(c.getElementsByTagName("updated",t.children,!1)[0].children[0].data)}catch(t){}e.items.push(i)})}this.dom=e}a.super_.prototype.done.call(this)},u._emptyTags={area:1,base:1,basefont:1,br:1,col:1,frame:1,hr:1,img:1,input:1,isindex:1,link:1,meta:1,param:1,embed:1},u.reWhitespace=/^\s*$/,u.prototype.dom=null,u.prototype.reset=function(){this.dom=[],this._done=!1,this._tagStack=[],this._tagStack.last=function(){return this.length?this[this.length-1]:null}},u.prototype.done=function(){this._done=!0,this.handleCallback(null)},u.prototype.writeTag=function(t){this.handleElement(t)},u.prototype.writeText=function(t){this._options.ignoreWhitespace&&u.reWhitespace.test(t.data)||this.handleElement(t)},u.prototype.writeComment=function(t){this.handleElement(t)},u.prototype.writeDirective=function(t){this.handleElement(t)},u.prototype.error=function(t){this.handleCallback(t)},u.prototype._options=null,u.prototype._callback=null,u.prototype._done=!1,u.prototype._tagStack=null,u.prototype.handleCallback=function(t){if("function"==typeof this._callback)this._callback(t,this.dom);else if(t)throw t},u.prototype.isEmptyTag=function(t){var e=t.name.toLowerCase();return"/"==e.charAt(0)&&(e=e.substring(1)),this._options.enforceEmptyTags&&!!u._emptyTags[e]},u.prototype.handleElement=function(t){if(this._done&&this.handleCallback(new Error("Writing to the handler after done() called is not allowed without a reset()")),this._options.verbose||(delete t.raw,"tag"!=t.type&&"script"!=t.type&&"style"!=t.type||delete t.data),this._tagStack.last())if(t.type!=i.Text&&t.type!=i.Comment&&t.type!=i.Directive)if("/"==t.name.charAt(0)){var e=t.name.substring(1);if(!this.isEmptyTag(t)){for(var r=this._tagStack.length-1;r>-1&&this._tagStack[r--].name!=e;);if(r>-1||this._tagStack[0].name==e)for(;r<this._tagStack.length-1;)this._tagStack.pop()}}else this._tagStack.last().children||(this._tagStack.last().children=[]),this._tagStack.last().children.push(t),this.isEmptyTag(t)||this._tagStack.push(t);else this._tagStack.last().children||(this._tagStack.last().children=[]),this._tagStack.last().children.push(t);else t.type!=i.Text&&t.type!=i.Comment&&t.type!=i.Directive?"/"!=t.name.charAt(0)&&(this.dom.push(t),this.isEmptyTag(t)||this._tagStack.push(t)):this.dom.push(t)};var c={testElement:function(t,e){if(!e)return!1;for(var r in t)if("tag_name"==r){if("tag"!=e.type&&"script"!=e.type&&"style"!=e.type)return!1;if(!t.tag_name(e.name))return!1}else if("tag_type"==r){if(!t.tag_type(e.type))return!1}else if("tag_contains"==r){if("text"!=e.type&&"comment"!=e.type&&"directive"!=e.type)return!1;if(!t.tag_contains(e.data))return!1}else if(!e.attribs||!t[r](e.attribs[r]))return!1;return!0},getElements:function(t,e,r,n){if(r=null==r||!!r,n=isNaN(parseInt(n))?-1:parseInt(n),!e)return[];var i,o=[];function a(t){return function(e){return e==t}}for(var u in t)"function"!=typeof t[u]&&(t[u]=a(t[u]));if(c.testElement(t,e)&&o.push(e),n>=0&&o.length>=n)return o;if(r&&e.children)i=e.children;else{if(!(e instanceof Array))return o;i=e}for(var s=0;s<i.length&&(o=o.concat(c.getElements(t,i[s],r,n)),!(n>=0&&o.length>=n));s++);return o},getElementById:function(t,e,r){var n=c.getElements({id:t},e,r,1);return n.length?n[0]:null},getElementsByTagName:function(t,e,r,n){return c.getElements({tag_name:t},e,r,n)},getElementsByTagType:function(t,e,r,n){return c.getElements({tag_type:t},e,r,n)}};e.Parser=o,e.DefaultHandler=u,e.RssHandler=a,e.ElementType=i,e.DomUtils=c}()}(0,on.exports);var an=nn(on.exports);function un(){return"undefined"!=typeof self?self:"undefined"!=typeof window&&void 0!==window.document?window:"undefined"!=typeof global?global:null}function cn(t){let e=null;if(!Vr(t))return"";let r=function(){let t=un();return an||t.htmlparser||t.Tautologistics.NodeHtmlParser}(),n=new r.DefaultHandler(function(t,r){t&&(e=t)});if(new r.Parser(n).parseComplete(t),null!==e)return e;let i=[];return function t(e){Zt(e,e=>{Ur(e.children)>0&&t(e.children),"text"===e.type&&i.push(e.data)})}(n.dom),i=mr(i,""),i}function sn(t,e){let r=function(){let t,e,r=new Promise(function(){t=arguments[0],e=arguments[1]});return r.resolve=t,r.reject=e,r}();if(!Jr(t)&&!Qr(t))return r.reject("rs is not an array or object"),r;let n=!1;if(Qr(t)){n=!0;let e=[];Zt(t,(t,r)=>{e.push({k:r,v:t})}),t=e}Zr(e)||(e=function(t){return t});let i=-1,o=[];return t.reduce(function(t,r){return t.then(function(t){o.push(t),i+=1;let a=i,u=r;return n&&(a=r.k,u=r.v),Zr(e)?e(u,a):u})},Promise.resolve()).then(function(t){o.push(t),o=kr(o),r.resolve(o)}).catch(function(t){r.reject(t)}),r}function ln(t){return!!Yr(t)&&(t=tn(t),"number"==typeof(e=t)&&e==Er(e));var e}var fn=d.isFinite,pn=Math.min;var hn=function(t){var e=Math[t];return function(t,r){if(t=xr(t),(r=null==r?0:pn(Er(r),292))&&fn(t)){var n=(pt(t)+"e").split("e");return+((n=(pt(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}("round"),dn=hn;function yn(t){if(!Yr(t))return 0;t=tn(t);let e=dn(t);return"0"===String(e)?0:e}function gn(t){if(!ln(t))return!1;return yn(t)>=0}function bn(t,e){if(!Vr(t))return"";if(!gn(e))return"";if(0===(e=yn(e)))return"";let r=t.length-e;return r<0&&(r=0),t.substring(r,r+e)}function vn(t,e){return Vr(t)&&gn(e)?0===(e=yn(e))?t:function(t,e){return Vr(t)&&gn(e)?0===(e=yn(e))?"":t.substring(0,e):""}(t,t.length-e):""}function _n(t){if(!Vr(t))return{path:"",isRoot:!1};for(;t.indexOf("\\\\")>=0;)t=t.replace("\\\\","\\");for(;t.indexOf("//")>=0;)t=t.replace("//","/");if(":"===bn(t,1))return{path:`${t}\\`,isRoot:!0};if("\\"===bn(t,1)){let e=vn(t,1);return":"===bn(e,1)?{path:t,isRoot:!0}:{path:e,isRoot:!1}}if("/"===bn(t,1)){let e=vn(t,1);return 0===e.length?{path:t,isRoot:!0}:{path:e,isRoot:!1}}return{path:t,isRoot:!1}}function mn(t){if(!Vr(t))return"";let e=_n(t);if(e.isRoot)return e.path;let r=e.path;try{r=r.split("\\").pop().split("/").pop()}catch(t){}return r}function jn(t){if(!Vr(t))return"";let e=mn(t),r=pr(e,".");if(Ur(r)<=1)return e;let n="";try{r=(u=null==(i=r)?0:i.length)?Ve(i,0,(o=u-(o=a||void 0===o?1:Er(o)))<0?0:o):[],n=mr(r,".")}catch(t){}var i,o,a,u;return n}function wn(t){if(!Vr(t))return"";let e=_n(t);if(e.isRoot)return e.path;let r=mn(t=e.path);if(!Vr(r))return t;let n=_n(t=vn(t,r.length));return n.isRoot,n.path}function Sn(t){return function(t,e={}){let r=gt(e,"fs");return!!r.existsSync(t)&&!r.lstatSync(t).isDirectory()&&!r.lstatSync(t).isSymbolicLink()}(t,{fs:e})}var On={exports:{}};
/*!
   * w-image-proc v1.0.2
   * (c) 2018-2021 yuda-lyu(semisphere)
   * Released under the MIT License.
   */!function(t,n){t.exports=function(e,r){var i=Array.isArray,o="object"==typeof rn&&rn&&rn.Object===Object&&rn,a="object"==typeof self&&self&&self.Object===Object&&self,u=o||a||Function("return this")(),c=u.Symbol,s=Object.prototype,l=s.hasOwnProperty,f=s.toString,p=c?c.toStringTag:void 0,h=Object.prototype.toString,d=c?c.toStringTag:void 0;function y(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":d&&d in Object(t)?function(t){var e=l.call(t,p),r=t[p];try{t[p]=void 0;var n=!0}catch(t){}var i=f.call(t);return n&&(e?t[p]=r:delete t[p]),i}(t):function(t){return h.call(t)}(t)}function g(t){return null!=t&&"object"==typeof t}function b(t){return"symbol"==typeof t||g(t)&&"[object Symbol]"==y(t)}var v=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_=/^\w*$/;function m(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function j(t){if(!m(t))return!1;var e=y(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var w,S=u["__core-js_shared__"],O=(w=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"",x=Function.prototype.toString;function T(t){if(null!=t){try{return x.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var A=/^\[object .+?Constructor\]$/,E=Function.prototype,k=Object.prototype,z=E.toString,N=k.hasOwnProperty,B=RegExp("^"+z.call(N).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $(t){return!(!m(t)||(e=t,O&&O in e))&&(j(t)?B:A).test(T(t));var e}function H(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return $(r)?r:void 0}var C=H(Object,"create"),P=Object.prototype.hasOwnProperty,F=Object.prototype.hasOwnProperty;function D(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function R(t,e){return t===e||t!=t&&e!=e}function I(t,e){for(var r=t.length;r--;)if(R(t[r][0],e))return r;return-1}D.prototype.clear=function(){this.__data__=C?C(null):{},this.size=0},D.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},D.prototype.get=function(t){var e=this.__data__;if(C){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return P.call(e,t)?e[t]:void 0},D.prototype.has=function(t){var e=this.__data__;return C?void 0!==e[t]:F.call(e,t)},D.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=C&&void 0===e?"__lodash_hash_undefined__":e,this};var L=Array.prototype.splice;function M(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}M.prototype.clear=function(){this.__data__=[],this.size=0},M.prototype.delete=function(t){var e=this.__data__,r=I(e,t);return!(r<0||(r==e.length-1?e.pop():L.call(e,r,1),--this.size,0))},M.prototype.get=function(t){var e=this.__data__,r=I(e,t);return r<0?void 0:e[r][1]},M.prototype.has=function(t){return I(this.__data__,t)>-1},M.prototype.set=function(t,e){var r=this.__data__,n=I(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};var W=H(u,"Map");function U(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function q(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function G(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(G.Cache||q),r}q.prototype.clear=function(){this.size=0,this.__data__={hash:new D,map:new(W||M),string:new D}},q.prototype.delete=function(t){var e=U(this,t).delete(t);return this.size-=e?1:0,e},q.prototype.get=function(t){return U(this,t).get(t)},q.prototype.has=function(t){return U(this,t).has(t)},q.prototype.set=function(t,e){var r=U(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},G.Cache=q;var V,J,Q,K=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,X=/\\(\\)?/g,Y=(V=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(K,function(t,r,n,i){e.push(n?i.replace(X,"$1"):r||t)}),e},J=G(V,function(t){return 500===Q.size&&Q.clear(),t}),Q=J.cache,J),Z=Y,tt=c?c.prototype:void 0,et=tt?tt.toString:void 0;function rt(t){if("string"==typeof t)return t;if(i(t))return function(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}(t,rt)+"";if(b(t))return et?et.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function nt(t){return null==t?"":rt(t)}function it(t,e){return i(t)?t:function(t,e){if(i(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!b(t))||_.test(t)||!v.test(t)||null!=e&&t in Object(e)}(t,e)?[t]:Z(nt(t))}function ot(t){if("string"==typeof t||b(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function at(t,e,r){var n=null==t?void 0:function(t,e){for(var r=0,n=(e=it(e,t)).length;null!=t&&r<n;)t=t[ot(e[r++])];return r&&r==n?t:void 0}(t,e);return void 0===n?r:n}function ut(t){return nt(t).toLowerCase()}function ct(t){var e=this.__data__=new M(t);this.size=e.size}ct.prototype.clear=function(){this.__data__=new M,this.size=0},ct.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},ct.prototype.get=function(t){return this.__data__.get(t)},ct.prototype.has=function(t){return this.__data__.has(t)},ct.prototype.set=function(t,e){var r=this.__data__;if(r instanceof M){var n=r.__data__;if(!W||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new q(n)}return r.set(t,e),this.size=r.size,this};var st=function(){try{var t=H(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),lt=st;function ft(t,e,r){"__proto__"==e&&lt?lt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var pt=Object.prototype.hasOwnProperty;function ht(t,e,r){var n=t[e];pt.call(t,e)&&R(n,r)&&(void 0!==r||e in t)||ft(t,e,r)}function dt(t,e,r,n){var i=!r;r||(r={});for(var o=-1,a=e.length;++o<a;){var u=e[o],c=n?n(r[u],t[u],u,r,t):void 0;void 0===c&&(c=t[u]),i?ft(r,u,c):ht(r,u,c)}return r}function yt(t){return g(t)&&"[object Arguments]"==y(t)}var gt=Object.prototype,bt=gt.hasOwnProperty,vt=gt.propertyIsEnumerable,_t=yt(function(){return arguments}())?yt:function(t){return g(t)&&bt.call(t,"callee")&&!vt.call(t,"callee")},mt=_t,jt=n&&!n.nodeType&&n,wt=jt&&t&&!t.nodeType&&t,St=wt&&wt.exports===jt?u.Buffer:void 0,Ot=(St?St.isBuffer:void 0)||function(){return!1},xt=/^(?:0|[1-9]\d*)$/;function Tt(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&xt.test(t))&&t>-1&&t%1==0&&t<e}function At(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}var Et={};function kt(t){return function(e){return t(e)}}Et["[object Float32Array]"]=Et["[object Float64Array]"]=Et["[object Int8Array]"]=Et["[object Int16Array]"]=Et["[object Int32Array]"]=Et["[object Uint8Array]"]=Et["[object Uint8ClampedArray]"]=Et["[object Uint16Array]"]=Et["[object Uint32Array]"]=!0,Et["[object Arguments]"]=Et["[object Array]"]=Et["[object ArrayBuffer]"]=Et["[object Boolean]"]=Et["[object DataView]"]=Et["[object Date]"]=Et["[object Error]"]=Et["[object Function]"]=Et["[object Map]"]=Et["[object Number]"]=Et["[object Object]"]=Et["[object RegExp]"]=Et["[object Set]"]=Et["[object String]"]=Et["[object WeakMap]"]=!1;var zt=n&&!n.nodeType&&n,Nt=zt&&t&&!t.nodeType&&t,Bt=Nt&&Nt.exports===zt&&o.process,$t=function(){try{return Nt&&Nt.require&&Nt.require("util").types||Bt&&Bt.binding&&Bt.binding("util")}catch(t){}}(),Ht=$t&&$t.isTypedArray,Ct=Ht?kt(Ht):function(t){return g(t)&&At(t.length)&&!!Et[y(t)]},Pt=Object.prototype.hasOwnProperty;function Ft(t,e){var r=i(t),n=!r&&mt(t),o=!r&&!n&&Ot(t),a=!r&&!n&&!o&&Ct(t),u=r||n||o||a,c=u?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],s=c.length;for(var l in t)!e&&!Pt.call(t,l)||u&&("length"==l||o&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Tt(l,s))||c.push(l);return c}var Dt=Object.prototype;function Rt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Dt)}function It(t,e){return function(r){return t(e(r))}}var Lt=It(Object.keys,Object),Mt=Object.prototype.hasOwnProperty;function Wt(t){if(!Rt(t))return Lt(t);var e=[];for(var r in Object(t))Mt.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Ut(t){return null!=t&&At(t.length)&&!j(t)}function qt(t){return Ut(t)?Ft(t):Wt(t)}var Gt=Object.prototype.hasOwnProperty;function Vt(t){if(!m(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=Rt(t),r=[];for(var n in t)("constructor"!=n||!e&&Gt.call(t,n))&&r.push(n);return r}function Jt(t){return Ut(t)?Ft(t,!0):Vt(t)}var Qt=n&&!n.nodeType&&n,Kt=Qt&&t&&!t.nodeType&&t,Xt=Kt&&Kt.exports===Qt?u.Buffer:void 0,Yt=Xt?Xt.allocUnsafe:void 0;function Zt(){return[]}var te=Object.prototype.propertyIsEnumerable,ee=Object.getOwnPropertySymbols,re=ee?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,i=0,o=[];++r<n;){var a=t[r];e(a,r,t)&&(o[i++]=a)}return o}(ee(t),function(e){return te.call(t,e)}))}:Zt,ne=re;function ie(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var oe=It(Object.getPrototypeOf,Object),ae=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)ie(e,ne(t)),t=oe(t);return e}:Zt,ue=ae;function ce(t,e,r){var n=e(t);return i(t)?n:ie(n,r(t))}function se(t){return ce(t,qt,ne)}function le(t){return ce(t,Jt,ue)}var fe=H(u,"DataView"),pe=H(u,"Promise"),he=H(u,"Set"),de=H(u,"WeakMap"),ye="[object Map]",ge="[object Promise]",be="[object Set]",ve="[object WeakMap]",_e="[object DataView]",me=T(fe),je=T(W),we=T(pe),Se=T(he),Oe=T(de),xe=y;(fe&&xe(new fe(new ArrayBuffer(1)))!=_e||W&&xe(new W)!=ye||pe&&xe(pe.resolve())!=ge||he&&xe(new he)!=be||de&&xe(new de)!=ve)&&(xe=function(t){var e=y(t),r="[object Object]"==e?t.constructor:void 0,n=r?T(r):"";if(n)switch(n){case me:return _e;case je:return ye;case we:return ge;case Se:return be;case Oe:return ve}return e});var Te=xe,Ae=Object.prototype.hasOwnProperty,Ee=u.Uint8Array;function ke(t){var e=new t.constructor(t.byteLength);return new Ee(e).set(new Ee(t)),e}var ze=/\w*$/,Ne=c?c.prototype:void 0,Be=Ne?Ne.valueOf:void 0;function $e(t,e,r){var n,i=t.constructor;switch(e){case"[object ArrayBuffer]":return ke(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":return function(t,e){var r=e?ke(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var r=e?ke(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,r);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return function(t){var e=new t.constructor(t.source,ze.exec(t));return e.lastIndex=t.lastIndex,e}(t);case"[object Symbol]":return n=t,Be?Object(Be.call(n)):{}}}var He=Object.create,Ce=function(){function t(){}return function(e){if(!m(e))return{};if(He)return He(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Pe=Ce,Fe=$t&&$t.isMap,De=Fe?kt(Fe):function(t){return g(t)&&"[object Map]"==Te(t)},Re=$t&&$t.isSet,Ie=Re?kt(Re):function(t){return g(t)&&"[object Set]"==Te(t)},Le="[object Arguments]",Me="[object Function]",We="[object Object]",Ue={};function qe(t,e,r,n,o,a){var u,c=1&e,s=2&e,l=4&e;if(r&&(u=o?r(t,n,o,a):r(t)),void 0!==u)return u;if(!m(t))return t;var f=i(t);if(f){if(u=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Ae.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!c)return function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(t,u)}else{var p=Te(t),h=p==Me||"[object GeneratorFunction]"==p;if(Ot(t))return function(t,e){if(e)return t.slice();var r=t.length,n=Yt?Yt(r):new t.constructor(r);return t.copy(n),n}(t,c);if(p==We||p==Le||h&&!o){if(u=s||h?{}:function(t){return"function"!=typeof t.constructor||Rt(t)?{}:Pe(oe(t))}(t),!c)return s?function(t,e){return dt(t,ue(t),e)}(t,function(t,e){return t&&dt(e,Jt(e),t)}(u,t)):function(t,e){return dt(t,ne(t),e)}(t,function(t,e){return t&&dt(e,qt(e),t)}(u,t))}else{if(!Ue[p])return o?t:{};u=$e(t,p,c)}}a||(a=new ct);var d=a.get(t);if(d)return d;a.set(t,u),Ie(t)?t.forEach(function(n){u.add(qe(n,e,r,n,t,a))}):De(t)&&t.forEach(function(n,i){u.set(i,qe(n,e,r,i,t,a))});var y=f?void 0:(l?s?le:se:s?Jt:qt)(t);return function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););}(y||t,function(n,i){y&&(n=t[i=n]),ht(u,i,qe(n,e,r,i,t,a))}),u}function Ge(t){return qe(t,5)}function Ve(t){return!(!function(t){return"[object String]"===Object.prototype.toString.call(t)}(t)||""===t)}function Je(t){let e=!1;if(Ve(t))e=!isNaN(Number(t));else if(function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)){if(function(t){return t!=t}(t))return!1;e=!0}return e}function Qe(t){let e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e}function Ke(t){return!0===(e=t)||!1===e||g(e)&&"[object Boolean]"==y(e);var e}function Xe(t){let e,r=Object.prototype.toString.call(t);if(e="[object Promise]"===r,e)return!0;if("[object Function]"!==r)return!1;try{e="function"!=typeof t.subscribe&&"function"==typeof t.then}catch(t){}return e}Ue[Le]=Ue["[object Array]"]=Ue["[object ArrayBuffer]"]=Ue["[object DataView]"]=Ue["[object Boolean]"]=Ue["[object Date]"]=Ue["[object Float32Array]"]=Ue["[object Float64Array]"]=Ue["[object Int8Array]"]=Ue["[object Int16Array]"]=Ue["[object Int32Array]"]=Ue["[object Map]"]=Ue["[object Number]"]=Ue[We]=Ue["[object RegExp]"]=Ue["[object Set]"]=Ue["[object String]"]=Ue["[object Symbol]"]=Ue["[object Uint8Array]"]=Ue["[object Uint8ClampedArray]"]=Ue["[object Uint16Array]"]=Ue["[object Uint32Array]"]=!0,Ue["[object Error]"]=Ue[Me]=Ue["[object WeakMap]"]=!1;var Ye=/\s/,Ze=/^\s+/;function tr(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&Ye.test(t.charAt(e)););return e}(t)+1).replace(Ze,""):t}var er=/^[-+]0x[0-9a-f]+$/i,rr=/^0b[01]+$/i,nr=/^0o[0-7]+$/i,ir=parseInt;function or(t){if("number"==typeof t)return t;if(b(t))return NaN;if(m(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=m(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=tr(t);var r=rr.test(t);return r||nr.test(t)?ir(t.slice(2),r?2:8):er.test(t)?NaN:+t}var ar=1/0;function ur(t){return t?(t=or(t))===ar||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function cr(t){var e=ur(t),r=e%1;return e==e?r?e-r:e:0}var sr=u.isFinite,lr=Math.min,fr=function(){var t=Math.round;return function(e,r){if(e=or(e),(r=null==r?0:lr(cr(r),292))&&sr(e)){var n=(nt(e)+"e").split("e");return+((n=(nt(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}(),pr=fr;function hr(t){return Je(t)?ur(t):0}function dr(t){if(!Je(t))return 0;t=hr(t);let e=pr(t);return"0"===String(e)?0:e}function yr(t,e){return r=t,"[object Object]"===Object.prototype.toString.call(r)&&!(!Ve(e)&&!Je(e))&&e in t;var r}function gr(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:function(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(r=r>i?i:r)<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}(t,e,r)}var br=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function vr(t){return br.test(t)}var _r=$t&&$t.isRegExp,mr=_r?kt(_r):function(t){return g(t)&&"[object RegExp]"==y(t)},jr="\\ud800-\\udfff",wr="["+jr+"]",Sr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Or="\\ud83c[\\udffb-\\udfff]",xr="[^"+jr+"]",Tr="(?:\\ud83c[\\udde6-\\uddff]){2}",Ar="[\\ud800-\\udbff][\\udc00-\\udfff]",Er="(?:"+Sr+"|"+Or+")?",kr="[\\ufe0e\\ufe0f]?",zr=kr+Er+"(?:\\u200d(?:"+[xr,Tr,Ar].join("|")+")"+kr+Er+")*",Nr="(?:"+[xr+Sr+"?",Sr,Tr,Ar,wr].join("|")+")",Br=RegExp(Or+"(?="+Or+")|"+Nr+zr,"g");function $r(t){return vr(t)?function(t){return t.match(Br)||[]}(t):function(t){return t.split("")}(t)}function Hr(t,e,r){return r&&"number"!=typeof r&&function(t,e,r){if(!m(r))return!1;var n=typeof e;return!!("number"==n?Ut(r)&&Tt(e,r.length):"string"==n&&e in r)&&R(r[e],t)}(t,e,r)&&(e=r=void 0),(r=void 0===r?4294967295:r>>>0)?(t=nt(t))&&("string"==typeof e||null!=e&&!mr(e))&&!(e=rt(e))&&vr(t)?gr($r(t),0,r):t.split(e,r):[]}var Cr,Pr=(Cr="length",function(t){return null==t?void 0:t[Cr]}),Fr="\\ud800-\\udfff",Dr="["+Fr+"]",Rr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ir="\\ud83c[\\udffb-\\udfff]",Lr="[^"+Fr+"]",Mr="(?:\\ud83c[\\udde6-\\uddff]){2}",Wr="[\\ud800-\\udbff][\\udc00-\\udfff]",Ur="(?:"+Rr+"|"+Ir+")?",qr="[\\ufe0e\\ufe0f]?",Gr=qr+Ur+"(?:\\u200d(?:"+[Lr,Mr,Wr].join("|")+")"+qr+Ur+")*",Vr="(?:"+[Lr+Rr+"?",Rr,Mr,Wr,Dr].join("|")+")",Jr=RegExp(Ir+"(?="+Ir+")|"+Vr+Gr,"g");function Qr(t){return vr(t)?function(t){for(var e=Jr.lastIndex=0;Jr.test(t);)++e;return e}(t):Pr(t)}function Kr(t){if(null==t)return 0;if(Ut(t))return"string"==typeof(e=t)||!i(e)&&g(e)&&"[object String]"==y(e)?Qr(t):t.length;var e,r=Te(t);return"[object Map]"==r||"[object Set]"==r?t.size:Wt(t).length}function Xr(t){return!!Je(t)&&"number"==typeof(e=t=hr(t))&&e==cr(e);var e}function Yr(t){return!!Xr(t)&&dr(t)>=0}function Zr(t,e){if(!Ve(t))return"";if(!Yr(e))return"";if(0===(e=dr(e)))return"";let r=t.length-e;return r<0&&(r=0),t.substring(r,r+e)}function tn(t,e){return Ve(t)&&Yr(e)?0===(e=dr(e))?t:function(t,e){return Ve(t)&&Yr(e)?0===(e=dr(e))?"":t.substring(0,e):""}(t,t.length-e):""}function en(t){if(!Ve(t))return"";let e=function(t){if(!Ve(t))return{path:"",isRoot:!1};for(;t.indexOf("\\\\")>=0;)t=t.replace("\\\\","\\");for(;t.indexOf("//")>=0;)t=t.replace("//","/");if(":"===Zr(t,1))return{path:`${t}\\`,isRoot:!0};if("\\"===Zr(t,1)){let e=tn(t,1);return":"===Zr(e,1)?{path:t,isRoot:!0}:{path:e,isRoot:!1}}if("/"===Zr(t,1)){let e=tn(t,1);return 0===e.length?{path:t,isRoot:!0}:{path:e,isRoot:!1}}return{path:t,isRoot:!1}}(t);if(e.isRoot)return e.path;let r=e.path;try{r=r.split("\\").pop().split("/").pop()}catch(t){}return r}function nn(t){return function(t,e={}){let r=at(e,"fs");return!!r.existsSync(t)&&!r.lstatSync(t).isDirectory()&&!r.lstatSync(t).isSymbolicLink()}(t,{fs:e})}let on=(t,e)=>{let r=t.toString("base64"),n=(t=>"png"===(t=ut(t))?"image/png":"jpg"===t||"jpeg"===t?"image/jpeg":"gif"===t?"image/gif":"svg"===t?"image/svg+xml":"webp"===t?"image/webp":"application/octet-stream")(e);return`data:${n};base64,${r}`},an=async(t,n,i={})=>{if(!nn(t))throw new Error(`fpInp[${t}] does not exist`);let o=at(i,"funGetWidth"),a=at(i,"funGetHeight"),u=at(i,"funGetSize"),c=at(i,"cropLeft"),s=at(i,"cropTop"),l=at(i,"cropWidth"),f=at(i,"cropHeight"),p=at(i,"density");Je(p)||(p=96),p=dr(p);let h=at(i,"returnBase64");Ke(h)||(h=!1);let d=function(t){if(!Ve(t))return"";let e=Hr(en(t),".");if(Kr(e)<=1)return"";let r="";try{r=(i=null==(n=e)?0:n.length)?n[i-1]:void 0}catch(t){}var n,i;return r}(n);d=ut(d);let y=e.readFileSync(t),g=null,b=null;if(Qe(u)||Qe(o)||Qe(a)){let t=await r(y).metadata();if(Qe(u)){let e=u(Ge(t));if(Xe(e)&&(e=await e),!Je(at(e,"width")))throw new Error("invalid ret.width for funGetSize");if(!Je(at(e,"height")))throw new Error("invalid ret.height for funGetSize");g=dr(e.width),b=dr(e.height)}else Qe(o)?(g=o(Ge(t)),Xe(g)&&(g=await g),g=dr(g)):Qe(a)&&(b=a(Ge(t)),Xe(b)&&(b=await b),b=dr(b))}let v=await r(y,{density:p}),_=Je(g),m=Je(b),j=Je(c)&&Je(s)&&Je(l)&&Je(f);_&&m?v=v.resize({width:g,height:b,withoutEnlargement:!0}):_&&!m?v=v.resize({width:g,withoutEnlargement:!0}):!_&&m&&(v=v.resize({height:b,withoutEnlargement:!0})),j&&(c=dr(c),s=dr(s),l=dr(l),f=dr(f),v=v.extract({left:c,top:s,width:l,height:f}));let w={png:()=>v.png({compressionLevel:9,adaptiveFiltering:!1,palette:!1,quality:100,colors:256,...i}),jpg:()=>v.flatten({background:at(i,"background","#fff")}).jpeg({quality:100,progressive:!1,chromaSubsampling:"4:2:0",optimiseCoding:!0,mozjpeg:!1,overshootDeringing:!1,...i}),jpeg:()=>v.flatten({background:at(i,"background","#fff")}).jpeg({quality:100,progressive:!1,chromaSubsampling:"4:2:0",optimiseCoding:!0,mozjpeg:!1,overshootDeringing:!1,...i}),webp:()=>v.webp({quality:100,alphaQuality:100,lossless:!0,...i}),avif:()=>v.avif({quality:50,lossless:!1,speed:5,chromaSubsampling:"4:2:0",...i}),gif:()=>v.gif({effort:7,interlace:!1,...i}),tiff:()=>v.tiff({quality:100,compression:"jpeg",predictor:"horizontal",pyramid:!1,tile:!1,...i}),bmp:()=>v.bmp({...i})};v=yr(w,d)?w[d]():v.toFormat(d);let S=await v.toBuffer();return h?on(S,d):(e.writeFileSync(n,S),"ok")};return{proc:an,convert:async(t,e,r={})=>{let n={...r,cropLeft:null,cropTop:null,cropWidth:null,cropHeight:null,funGetWidth:null,funGetHeight:null,funGetSize:null,returnBase64:!1};return await an(t,e,n)},resize:async(t,e,r={})=>{let n={...r,cropLeft:null,cropTop:null,cropWidth:null,cropHeight:null,returnBase64:!1};return await an(t,e,n)},crop:async(t,e,r,n,i,o,a={})=>{let u={...a,cropLeft:e,cropTop:r,cropWidth:n,cropHeight:i,funGetWidth:null,funGetHeight:null,funGetSize:null,returnBase64:!1};return await an(t,o,u)},base64:async(t,e,r={})=>{let n={...r,cropLeft:null,cropTop:null,cropWidth:null,cropHeight:null,returnBase64:!0};return await an(t,`${t}.${e}`,n)}}}(e,r)}(On,On.exports);var xn=nn(On.exports);return async function(r,c,s={}){if(!Sn(r))return Promise.reject(`fpIn[${r}] does not exist`);let p=wn(r=t.resolve(r)),h=gt(s,"fpInTemp");if(!Sn(h)){let t="./src/html.tmp",e="./node_modules/w-md2html/src/html.tmp";if(Sn(t))h=t;else{if(!Sn(e))throw new Error(`fpInTemp[${h}] does not exist`);h=e}}h=t.resolve(h);let d=gt(s,"imgWidthMax",null);Yr(d)&&(d=`${d}px`);let y=gt(s,"imgConvertToBase64",null);qr(y)||(y=!0);let g=gt(s,"funProcFpOut"),b=(t,e)=>{let r=pr(t,"\n"),n=0,i=[],o={};Zt(r,t=>{let r=t;if(t.indexOf(`${e}n`)>=0){let i;n++,r=en(t,`${e}n`,`${e}${n}`),i=t,i=cn(i),i=en(i,`${e}n`,""),i=vr(i),i=`{${i}}`,o[i]=`${e}${n}`}i.push(r)});let a=mr(i,"\n");return Zt(o,(t,e)=>{a=a.replaceAll(e,t)}),a},v=gt(s,"fontFamilies",[]);var _,m,j;(!Jr(_=v)||0===_.length||1===_.length&&Xr(_[0]))&&(v=["Microsoft JhengHei","Avenir","Helvetica","Arial","sans-serif"]),v=mr((j=t=>`'${t}'`,(f(m=v)?ct:Ge)(m,qe(j))),", ");let w=gt(s,"fontSizeUnit","");Vr(w)||(w="pt");let S=gt(s,"fontSizeScale","");Yr(S)||(S=1),S=tn(S);let O=gt(s,"fontSizeDef","");Vr(O)||(O=12*S+w);let x=gt(s,"fontSizeH1","");Vr(x)||(x=20*S+w);let T=gt(s,"fontSizeH2","");Vr(T)||(T=16*S+w);let A=gt(s,"fontSizeH3","");Vr(A)||(A=14*S+w);let E=gt(s,"fontSizeH4","");Vr(E)||(E=12*S+w);let k=gt(s,"fontSizeH5","");Vr(k)||(k=12*S+w);let z=gt(s,"fontSizeH6","");Vr(z)||(z=12*S+w);let N=gt(s,"fontSizeP","");Vr(N)||(N=12*S+w);let B=gt(s,"fontSizeTab","");Vr(B)||(B=11*S+w);let $=gt(s,"fontSizeCode","");Vr($)||($=10*S+w);let H=gt(s,"textAlignH1","");Vr(H)||(H="left");let C=gt(s,"textAlignH2","");Vr(C)||(C="left");let P=gt(s,"textAlignH3","");Vr(P)||(P="left");let F=gt(s,"textAlignH4","");Vr(F)||(F="left");let D=gt(s,"textAlignH5","");Vr(D)||(D="left");let R=gt(s,"textAlignH6","");Vr(R)||(R="left");let I=e.readFileSync(h,"utf8"),L=jn(r),M=wn(r),W=e.readFileSync(r,"utf8"),U=(t=>{let e=pr(t,"\n"),r="";return Zt(e,(t,n)=>{if(t.indexOf(" pretitle ")>=0)return r=gt(e,n+1,""),r=vr(r),!1}),r})(W);W=b(W,""),W=b(W,""),W=await(async(t,e)=>{let r=[],n=pr(e,"\n");return await sn(n,async e=>{e.indexOf('src="')>=0&&(e=await(async e=>{let r=pr(e,'src="');if(2!==Ur(r))throw new Error("size(s)!==2");let n=r[0],i=pr(r[1],'"'),o=i[0],a="";if(Sn(o))a=o;else if(a=`${t}/${o}`,!Sn(a))throw console.log("c",e),console.log("fnp",o),new Error(`fp[${a}] does not exist`);let u=await xn.base64(a,"png");return i=kr(i),n+'src="'+u+'"'+mr(i,'"')})(e)),r.push(e)}),r=mr(r,"\n"),r})(M,W);let q=new n.Marked;q.use(i({throwOnError:!1,nonStandard:!0})),q.use(o()),q.use(u.markedHighlight({langPrefix:"hljs language-",emptyLangClass:"hljs",highlight(t,e){let r=e&&a.getLanguage(e)?e:"plaintext";return a.highlight(t,{language:r}).value}}));let G={image:({href:t,title:e,text:r})=>{let n=Vr(e)?`title="${e}"`:"",i="";return Vr(d)&&(i=`max-width:${d}; height:auto;`),`<img src="${t}" alt="${r}" ${n} style="${i}">`}};q.use({async:!0,renderer:G,walkTokens:async e=>{if("image"===e.type&&y)try{let r=t.resolve(p,e.href);Sn(r)?e.href=await xn.base64(r,"png"):console.log(`href[${e.href}] does not exist`)}catch(t){console.log(t)}}});let V=I;return V=en(V,"{html}",await q.parse(W)),V=en(V,"{title}",L),V=en(V,"{fontFamilies}",v),V=en(V,"{fontSizeDef}",O),V=en(V,"{fontSizeH1}",x),V=en(V,"{fontSizeH2}",T),V=en(V,"{fontSizeH3}",A),V=en(V,"{fontSizeH4}",E),V=en(V,"{fontSizeH5}",k),V=en(V,"{fontSizeH6}",z),V=en(V,"{fontSizeP}",N),V=en(V,"{fontSizeTab}",B),V=en(V,"{fontSizeCode}",$),V=en(V,"{textAlignH1}",H),V=en(V,"{textAlignH2}",C),V=en(V,"{textAlignH3}",P),V=en(V,"{textAlignH4}",F),V=en(V,"{textAlignH5}",D),V=en(V,"{textAlignH6}",R),V=en(V,'<h2 id="footnote-label" class="sr-only">Footnotes</h2>','<h2 id="footnote-label" class="sr-only" style="height:0px; line-height:0px; min-height:0px; overflow:hidden;">Footnotes</h2>'),V=V.replaceAll("<li>",'<li style="margin:7px 0;">'),V=V.replaceAll("<docx_br>",'\n<div style="height:0; overflow:hidden;">\n    <br>\n</div>    \n        '),V=(t=>{const e=l.load(t);return e('[style*="display:none"]').remove(),e.html()})(V),Zr(g)&&function(t){let e,r=Object.prototype.toString.call(t);if(e="[object Promise]"===r,e)return!0;if("[object Function]"!==r)return!1;try{e="function"!=typeof t.subscribe&&"function"==typeof t.then}catch(t){}return e}(c=g({fpOut:c,pretitle:U}))&&(c=await c),e.writeFileSync(c,V,"utf8"),"ok"}});
//# sourceMappingURL=w-md2html.umd.js.map
