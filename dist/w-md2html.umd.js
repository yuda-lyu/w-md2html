/*!
 * w-md2html v1.0.11
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("path"),require("fs"),require("marked"),require("marked-katex-extension"),require("marked-footnote"),require("highlight.js"),require("marked-highlight"),require("sharp")):"function"==typeof define&&define.amd?define(["path","fs","marked","marked-katex-extension","marked-footnote","highlight.js","marked-highlight","sharp"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-md2html"]=e(t.path,t.fs,t.marked,t["marked-katex-extension"],t["marked-footnote"],t.highlight.js,t["marked-highlight"],t.sharp)}(this,function(t,e,r,n,o,i,u,a){"use strict";var f=Array.isArray,c="object"==typeof global&&global&&global.Object===Object&&global,l="object"==typeof self&&self&&self.Object===Object&&self,s=c||l||Function("return this")(),p=s.Symbol,h=Object.prototype,v=h.hasOwnProperty,d=h.toString,g=p?p.toStringTag:void 0;var y=Object.prototype.toString;var b=p?p.toStringTag:void 0;function j(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":b&&b in Object(t)?function(t){var e=v.call(t,g),r=t[g];try{t[g]=void 0;var n=!0}catch(t){}var o=d.call(t);return n&&(e?t[g]=r:delete t[g]),o}(t):function(t){return y.call(t)}(t)}function _(t){return null!=t&&"object"==typeof t}function m(t){return"symbol"==typeof t||_(t)&&"[object Symbol]"==j(t)}var w=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,O=/^\w*$/;function S(t,e){if(f(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!m(t))||(O.test(t)||!w.test(t)||null!=e&&t in Object(e))}function x(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function A(t){if(!x(t))return!1;var e=j(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var z,$=s["__core-js_shared__"],k=(z=/[^.]+$/.exec($&&$.keys&&$.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"";var H=Function.prototype.toString;function F(t){if(null!=t){try{return H.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var P=/^\[object .+?Constructor\]$/,E=Function.prototype,R=Object.prototype,T=E.toString,B=R.hasOwnProperty,M=RegExp("^"+T.call(B).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function N(t){return!(!x(t)||(e=t,k&&k in e))&&(A(t)?M:P).test(F(t));var e}function I(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return N(r)?r:void 0}var q=I(Object,"create");var C=Object.prototype.hasOwnProperty;var D=Object.prototype.hasOwnProperty;function L(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function U(t,e){return t===e||t!=t&&e!=e}function V(t,e){for(var r=t.length;r--;)if(U(t[r][0],e))return r;return-1}L.prototype.clear=function(){this.__data__=q?q(null):{},this.size=0},L.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},L.prototype.get=function(t){var e=this.__data__;if(q){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return C.call(e,t)?e[t]:void 0},L.prototype.has=function(t){var e=this.__data__;return q?void 0!==e[t]:D.call(e,t)},L.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=q&&void 0===e?"__lodash_hash_undefined__":e,this};var W=Array.prototype.splice;function G(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}G.prototype.clear=function(){this.__data__=[],this.size=0},G.prototype.delete=function(t){var e=this.__data__,r=V(e,t);return!(r<0)&&(r==e.length-1?e.pop():W.call(e,r,1),--this.size,!0)},G.prototype.get=function(t){var e=this.__data__,r=V(e,t);return r<0?void 0:e[r][1]},G.prototype.has=function(t){return V(this.__data__,t)>-1},G.prototype.set=function(t,e){var r=this.__data__,n=V(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};var J=I(s,"Map");function K(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function Q(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Q.prototype.clear=function(){this.size=0,this.__data__={hash:new L,map:new(J||G),string:new L}},Q.prototype.delete=function(t){var e=K(this,t).delete(t);return this.size-=e?1:0,e},Q.prototype.get=function(t){return K(this,t).get(t)},Q.prototype.has=function(t){return K(this,t).has(t)},Q.prototype.set=function(t,e){var r=K(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function X(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var u=t.apply(this,n);return r.cache=i.set(o,u)||i,u};return r.cache=new(X.Cache||Q),r}X.Cache=Q;var Y,Z,tt,et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/\\(\\)?/g,nt=(Y=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(et,function(t,r,n,o){e.push(n?o.replace(rt,"$1"):r||t)}),e},Z=X(Y,function(t){return 500===tt.size&&tt.clear(),t}),tt=Z.cache,Z),ot=nt;function it(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var ut=p?p.prototype:void 0,at=ut?ut.toString:void 0;function ft(t){if("string"==typeof t)return t;if(f(t))return it(t,ft)+"";if(m(t))return at?at.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ct(t){return null==t?"":ft(t)}function lt(t,e){return f(t)?t:S(t,e)?[t]:ot(ct(t))}function st(t){if("string"==typeof t||m(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function pt(t,e){for(var r=0,n=(e=lt(e,t)).length;null!=t&&r<n;)t=t[st(e[r++])];return r&&r==n?t:void 0}function ht(t,e,r){var n=null==t?void 0:pt(t,e);return void 0===n?r:n}function vt(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}var dt,gt=function(t,e,r){for(var n=-1,o=Object(t),i=r(t),u=i.length;u--;){var a=i[dt?u:++n];if(!1===e(o[a],a,o))break}return t};function yt(t){return _(t)&&"[object Arguments]"==j(t)}var bt=Object.prototype,jt=bt.hasOwnProperty,_t=bt.propertyIsEnumerable,mt=yt(function(){return arguments}())?yt:function(t){return _(t)&&jt.call(t,"callee")&&!_t.call(t,"callee")},wt=mt;var Ot="object"==typeof exports&&exports&&!exports.nodeType&&exports,St=Ot&&"object"==typeof module&&module&&!module.nodeType&&module,xt=St&&St.exports===Ot?s.Buffer:void 0,At=(xt?xt.isBuffer:void 0)||function(){return!1},zt=/^(?:0|[1-9]\d*)$/;function $t(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&zt.test(t))&&t>-1&&t%1==0&&t<e}function kt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}var Ht={};function Ft(t){return function(e){return t(e)}}Ht["[object Float32Array]"]=Ht["[object Float64Array]"]=Ht["[object Int8Array]"]=Ht["[object Int16Array]"]=Ht["[object Int32Array]"]=Ht["[object Uint8Array]"]=Ht["[object Uint8ClampedArray]"]=Ht["[object Uint16Array]"]=Ht["[object Uint32Array]"]=!0,Ht["[object Arguments]"]=Ht["[object Array]"]=Ht["[object ArrayBuffer]"]=Ht["[object Boolean]"]=Ht["[object DataView]"]=Ht["[object Date]"]=Ht["[object Error]"]=Ht["[object Function]"]=Ht["[object Map]"]=Ht["[object Number]"]=Ht["[object Object]"]=Ht["[object RegExp]"]=Ht["[object Set]"]=Ht["[object String]"]=Ht["[object WeakMap]"]=!1;var Pt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Et=Pt&&"object"==typeof module&&module&&!module.nodeType&&module,Rt=Et&&Et.exports===Pt&&c.process,Tt=function(){try{var t=Et&&Et.require&&Et.require("util").types;return t||Rt&&Rt.binding&&Rt.binding("util")}catch(t){}}(),Bt=Tt&&Tt.isTypedArray,Mt=Bt?Ft(Bt):function(t){return _(t)&&kt(t.length)&&!!Ht[j(t)]},Nt=Object.prototype.hasOwnProperty;function It(t,e){var r=f(t),n=!r&&wt(t),o=!r&&!n&&At(t),i=!r&&!n&&!o&&Mt(t),u=r||n||o||i,a=u?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],c=a.length;for(var l in t)!e&&!Nt.call(t,l)||u&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||$t(l,c))||a.push(l);return a}var qt=Object.prototype;var Ct=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),Dt=Ct,Lt=Object.prototype.hasOwnProperty;function Ut(t){if(r=(e=t)&&e.constructor,e!==("function"==typeof r&&r.prototype||qt))return Dt(t);var e,r,n=[];for(var o in Object(t))Lt.call(t,o)&&"constructor"!=o&&n.push(o);return n}function Vt(t){return null!=t&&kt(t.length)&&!A(t)}function Wt(t){return Vt(t)?It(t):Ut(t)}var Gt=function(t,e){return function(r,n){if(null==r)return r;if(!Vt(r))return t(r,n);for(var o=r.length,i=e?o:-1,u=Object(r);(e?i--:++i<o)&&!1!==n(u[i],i,u););return r}}(function(t,e){return t&&gt(t,e,Wt)}),Jt=Gt;function Kt(t){return t}function Qt(t,e){var r;return(f(t)?vt:Jt)(t,"function"==typeof(r=e)?r:Kt)}function Xt(t){var e=this.__data__=new G(t);this.size=e.size}Xt.prototype.clear=function(){this.__data__=new G,this.size=0},Xt.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Xt.prototype.get=function(t){return this.__data__.get(t)},Xt.prototype.has=function(t){return this.__data__.has(t)},Xt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof G){var n=r.__data__;if(!J||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Q(n)}return r.set(t,e),this.size=r.size,this};function Yt(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Q;++e<r;)this.add(t[e])}function Zt(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function te(t,e){return t.has(e)}Yt.prototype.add=Yt.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Yt.prototype.has=function(t){return this.__data__.has(t)};function ee(t,e,r,n,o,i){var u=1&r,a=t.length,f=e.length;if(a!=f&&!(u&&f>a))return!1;var c=i.get(t),l=i.get(e);if(c&&l)return c==e&&l==t;var s=-1,p=!0,h=2&r?new Yt:void 0;for(i.set(t,e),i.set(e,t);++s<a;){var v=t[s],d=e[s];if(n)var g=u?n(d,v,s,e,t,i):n(v,d,s,t,e,i);if(void 0!==g){if(g)continue;p=!1;break}if(h){if(!Zt(e,function(t,e){if(!te(h,e)&&(v===t||o(v,t,r,n,i)))return h.push(e)})){p=!1;break}}else if(v!==d&&!o(v,d,r,n,i)){p=!1;break}}return i.delete(t),i.delete(e),p}var re=s.Uint8Array;function ne(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function oe(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var ie=p?p.prototype:void 0,ue=ie?ie.valueOf:void 0;var ae=Object.prototype.propertyIsEnumerable,fe=Object.getOwnPropertySymbols,ce=fe?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var u=t[r];e(u,r,t)&&(i[o++]=u)}return i}(fe(t),function(e){return ae.call(t,e)}))}:function(){return[]},le=ce;function se(t){return function(t,e,r){var n=e(t);return f(t)?n:function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}(n,r(t))}(t,Wt,le)}var pe=Object.prototype.hasOwnProperty;var he=I(s,"DataView"),ve=I(s,"Promise"),de=I(s,"Set"),ge=I(s,"WeakMap"),ye="[object Map]",be="[object Promise]",je="[object Set]",_e="[object WeakMap]",me="[object DataView]",we=F(he),Oe=F(J),Se=F(ve),xe=F(de),Ae=F(ge),ze=j;(he&&ze(new he(new ArrayBuffer(1)))!=me||J&&ze(new J)!=ye||ve&&ze(ve.resolve())!=be||de&&ze(new de)!=je||ge&&ze(new ge)!=_e)&&(ze=function(t){var e=j(t),r="[object Object]"==e?t.constructor:void 0,n=r?F(r):"";if(n)switch(n){case we:return me;case Oe:return ye;case Se:return be;case xe:return je;case Ae:return _e}return e});var $e=ze,ke="[object Arguments]",He="[object Array]",Fe="[object Object]",Pe=Object.prototype.hasOwnProperty;function Ee(t,e,r,n,o,i){var u=f(t),a=f(e),c=u?He:$e(t),l=a?He:$e(e),s=(c=c==ke?Fe:c)==Fe,p=(l=l==ke?Fe:l)==Fe,h=c==l;if(h&&At(t)){if(!At(e))return!1;u=!0,s=!1}if(h&&!s)return i||(i=new Xt),u||Mt(t)?ee(t,e,r,n,o,i):function(t,e,r,n,o,i,u){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new re(t),new re(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return U(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=ne;case"[object Set]":var f=1&n;if(a||(a=oe),t.size!=e.size&&!f)return!1;var c=u.get(t);if(c)return c==e;n|=2,u.set(t,e);var l=ee(a(t),a(e),n,o,i,u);return u.delete(t),l;case"[object Symbol]":if(ue)return ue.call(t)==ue.call(e)}return!1}(t,e,c,r,n,o,i);if(!(1&r)){var v=s&&Pe.call(t,"__wrapped__"),d=p&&Pe.call(e,"__wrapped__");if(v||d){var g=v?t.value():t,y=d?e.value():e;return i||(i=new Xt),o(g,y,r,n,i)}}return!!h&&(i||(i=new Xt),function(t,e,r,n,o,i){var u=1&r,a=se(t),f=a.length;if(f!=se(e).length&&!u)return!1;for(var c=f;c--;){var l=a[c];if(!(u?l in e:pe.call(e,l)))return!1}var s=i.get(t),p=i.get(e);if(s&&p)return s==e&&p==t;var h=!0;i.set(t,e),i.set(e,t);for(var v=u;++c<f;){var d=t[l=a[c]],g=e[l];if(n)var y=u?n(g,d,l,e,t,i):n(d,g,l,t,e,i);if(!(void 0===y?d===g||o(d,g,r,n,i):y)){h=!1;break}v||(v="constructor"==l)}if(h&&!v){var b=t.constructor,j=e.constructor;b==j||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof j&&j instanceof j||(h=!1)}return i.delete(t),i.delete(e),h}(t,e,r,n,o,i))}function Re(t,e,r,n,o){return t===e||(null==t||null==e||!_(t)&&!_(e)?t!=t&&e!=e:Ee(t,e,r,n,Re,o))}function Te(t){return t==t&&!x(t)}function Be(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}function Me(t){var e=function(t){for(var e=Wt(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,Te(o)]}return e}(t);return 1==e.length&&e[0][2]?Be(e[0][0],e[0][1]):function(r){return r===t||function(t,e,r,n){var o=r.length,i=o,u=!n;if(null==t)return!i;for(t=Object(t);o--;){var a=r[o];if(u&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<i;){var f=(a=r[o])[0],c=t[f],l=a[1];if(u&&a[2]){if(void 0===c&&!(f in t))return!1}else{var s=new Xt;if(n)var p=n(c,l,f,t,e,s);if(!(void 0===p?Re(l,c,3,n,s):p))return!1}}return!0}(r,t,e)}}function Ne(t,e){return null!=t&&e in Object(t)}function Ie(t,e){return null!=t&&function(t,e,r){for(var n=-1,o=(e=lt(e,t)).length,i=!1;++n<o;){var u=st(e[n]);if(!(i=null!=t&&r(t,u)))break;t=t[u]}return i||++n!=o?i:!!(o=null==t?0:t.length)&&kt(o)&&$t(u,o)&&(f(t)||wt(t))}(t,e,Ne)}function qe(t){return function(e){return null==e?void 0:e[t]}}function Ce(t){return S(t)?qe(st(t)):function(t){return function(e){return pt(e,t)}}(t)}function De(t){return"function"==typeof t?t:null==t?Kt:"object"==typeof t?f(t)?function(t,e){return S(t)&&Te(e)?Be(st(t),e):function(r){var n=ht(r,t);return void 0===n&&n===e?Ie(r,t):Re(e,n,3)}}(t[0],t[1]):Me(t):Ce(t)}function Le(t,e){var r=-1,n=Vt(t)?Array(t.length):[];return Jt(t,function(t,o,i){n[++r]=e(t,o,i)}),n}function Ue(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}function Ve(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:Ue(t,e,r)}var We=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Ge(t){return We.test(t)}var Je=Tt&&Tt.isRegExp,Ke=Je?Ft(Je):function(t){return _(t)&&"[object RegExp]"==j(t)};var Qe="\\ud800-\\udfff",Xe="["+Qe+"]",Ye="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ze="\\ud83c[\\udffb-\\udfff]",tr="[^"+Qe+"]",er="(?:\\ud83c[\\udde6-\\uddff]){2}",rr="[\\ud800-\\udbff][\\udc00-\\udfff]",nr="(?:"+Ye+"|"+Ze+")"+"?",or="[\\ufe0e\\ufe0f]?",ir=or+nr+("(?:\\u200d(?:"+[tr,er,rr].join("|")+")"+or+nr+")*"),ur="(?:"+[tr+Ye+"?",Ye,er,rr,Xe].join("|")+")",ar=RegExp(Ze+"(?="+Ze+")|"+ur+ir,"g");function fr(t){return Ge(t)?function(t){return t.match(ar)||[]}(t):function(t){return t.split("")}(t)}function cr(t,e,r){return r&&"number"!=typeof r&&function(t,e,r){if(!x(r))return!1;var n=typeof e;return!!("number"==n?Vt(r)&&$t(e,r.length):"string"==n&&e in r)&&U(r[e],t)}(t,e,r)&&(e=r=void 0),(r=void 0===r?4294967295:r>>>0)?(t=ct(t))&&("string"==typeof e||null!=e&&!Ke(e))&&!(e=ft(e))&&Ge(t)?Ve(fr(t),0,r):t.split(e,r):[]}var lr=/\s/;var sr=/^\s+/;function pr(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&lr.test(t.charAt(e)););return e}(t)+1).replace(sr,""):t}function hr(t){return t!=t}function vr(t,e,r){return e==e?function(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}(t,e,r):function(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,hr,r)}function dr(t,e,r){if((t=ct(t))&&(r||void 0===e))return pr(t);if(!t||!(e=ft(e)))return t;var n=fr(t),o=fr(e),i=function(t,e){for(var r=-1,n=t.length;++r<n&&vr(e,t[r],0)>-1;);return r}(n,o),u=function(t,e){for(var r=t.length;r--&&vr(e,t[r],0)>-1;);return r}(n,o)+1;return Ve(n,i,u).join("")}var gr=Array.prototype.join;function yr(t,e){return null==t?"":gr.call(t,e)}var br=/^[-+]0x[0-9a-f]+$/i,jr=/^0b[01]+$/i,_r=/^0o[0-7]+$/i,mr=parseInt;function wr(t){if("number"==typeof t)return t;if(m(t))return NaN;if(x(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=x(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=pr(t);var r=jr.test(t);return r||_r.test(t)?mr(t.slice(2),r?2:8):br.test(t)?NaN:+t}var Or=1/0;function Sr(t){return t?(t=wr(t))===Or||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function xr(t){var e=Sr(t),r=e%1;return e==e?r?e-r:e:0}function Ar(t,e,r){var n=null==t?0:t.length;return n?Ue(t,(e=r||void 0===e?1:xr(e))<0?0:e,n):[]}var zr=qe("length"),$r="\\ud800-\\udfff",kr="["+$r+"]",Hr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Fr="\\ud83c[\\udffb-\\udfff]",Pr="[^"+$r+"]",Er="(?:\\ud83c[\\udde6-\\uddff]){2}",Rr="[\\ud800-\\udbff][\\udc00-\\udfff]",Tr="(?:"+Hr+"|"+Fr+")"+"?",Br="[\\ufe0e\\ufe0f]?",Mr=Br+Tr+("(?:\\u200d(?:"+[Pr,Er,Rr].join("|")+")"+Br+Tr+")*"),Nr="(?:"+[Pr+Hr+"?",Hr,Er,Rr,kr].join("|")+")",Ir=RegExp(Fr+"(?="+Fr+")|"+Nr+Mr,"g");function qr(t){return Ge(t)?function(t){for(var e=Ir.lastIndex=0;Ir.test(t);)++e;return e}(t):zr(t)}function Cr(t){if(null==t)return 0;if(Vt(t))return"string"==typeof(e=t)||!f(e)&&_(e)&&"[object String]"==j(e)?qr(t):t.length;var e,r=$e(t);return"[object Map]"==r||"[object Set]"==r?t.size:Ut(t).length}function Dr(t){return!0===(e=t)||!1===e||_(e)&&"[object Boolean]"==j(e);var e}function Lr(t){return"[object String]"===Object.prototype.toString.call(t)}function Ur(t){return!(!Lr(t)||""===t)}function Vr(t){return"[object Array]"===Object.prototype.toString.call(t)}function Wr(t){return"[object Object]"===Object.prototype.toString.call(t)}function Gr(t){return t!=t}function Jr(t){return!!function(t){return"[object Undefined]"===Object.prototype.toString.call(t)}(t)||(!!function(t){return"[object Null]"===Object.prototype.toString.call(t)}(t)||(!!function(t){if(Wr(t)){for(let e in t)return!1;return!0}return!1}(t)||(!!function(t){return!(!Lr(t)||""!==t)}(t)||(!!function(t){return!!Vr(t)&&0===t.length}(t)||!!Gr(t)))))}function Kr(t){let e=!1;if(Ur(t))e=!isNaN(Number(t));else if(function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)){if(Gr(t))return!1;e=!0}return e}function Qr(t){let e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e}function Xr(t){if(!Kr(t))return 0;return Sr(t)}function Yr(t,e,r){if(!Ur(t))return"";if(!Ur(e))return"";if(!Lr(r))return"";return String(t).replaceAll(e,r)}function Zr(t,e){let r=function(){let t,e,r=new Promise(function(){t=arguments[0],e=arguments[1]});return r.resolve=t,r.reject=e,r}();if(!Vr(t)&&!Wr(t))return r.reject("rs is not an array or object"),r;let n=!1;if(Wr(t)){n=!0;let e=[];Qt(t,(t,r)=>{e.push({k:r,v:t})}),t=e}Qr(e)||(e=function(t){return t});let o=-1,i=[];return t.reduce(function(t,r){return t.then(function(t){i.push(t),o+=1;let u=o,a=r;return n&&(u=r.k,a=r.v),Qr(e)?e(a,u):a})},Promise.resolve()).then(function(t){i.push(t),i=Ar(i),r.resolve(i)}).catch(function(t){r.reject(t)}),r}function tn(t){return!!Kr(t)&&(t=Xr(t),"number"==typeof(e=t)&&e==xr(e));var e}var en=s.isFinite,rn=Math.min;var nn=function(t){var e=Math[t];return function(t,r){if(t=wr(t),(r=null==r?0:rn(xr(r),292))&&en(t)){var n=(ct(t)+"e").split("e");return+((n=(ct(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}("round"),on=nn;function un(t){if(!Kr(t))return 0;t=Xr(t);let e=on(t);return"0"===String(e)?0:e}function an(t){if(!tn(t))return!1;return un(t)>=0}function fn(t,e){if(!Ur(t))return"";if(!an(e))return"";if(0===(e=un(e)))return"";let r=t.length-e;return r<0&&(r=0),t.substring(r,r+e)}function cn(t,e){return Ur(t)&&an(e)?0===(e=un(e))?t:function(t,e){return Ur(t)&&an(e)?0===(e=un(e))?"":t.substring(0,e):""}(t,t.length-e):""}function ln(t){if(!Ur(t))return{path:"",isRoot:!1};for(;t.indexOf("\\\\")>=0;)t=t.replace("\\\\","\\");for(;t.indexOf("//")>=0;)t=t.replace("//","/");if(":"===fn(t,1))return{path:`${t}\\`,isRoot:!0};if("\\"===fn(t,1)){let e=cn(t,1);return":"===fn(e,1)?{path:t,isRoot:!0}:{path:e,isRoot:!1}}if("/"===fn(t,1)){let e=cn(t,1);return 0===e.length?{path:t,isRoot:!0}:{path:e,isRoot:!1}}return{path:t,isRoot:!1}}function sn(t){if(!Ur(t))return"";let e=ln(t);if(e.isRoot)return e.path;let r=e.path;try{r=r.split("\\").pop().split("/").pop()}catch(t){}return r}function pn(t){if(!Ur(t))return"";let e=sn(t),r=cr(e,".");if(Cr(r)<=1)return e;let n="";try{r=(a=null==(o=r)?0:o.length)?Ue(o,0,(i=a-(i=u||void 0===i?1:xr(i)))<0?0:i):[],n=yr(r,".")}catch(t){}var o,i,u,a;return n}function hn(t){if(!Ur(t))return"";let e=ln(t);if(e.isRoot)return e.path;let r=sn(t=e.path);if(!Ur(r))return t;let n=ln(t=cn(t,r.length));return n.isRoot,n.path}function vn(t){return function(t,e={}){let r=ht(e,"fs");return!!r.existsSync(t)&&!r.lstatSync(t).isDirectory()&&!r.lstatSync(t).isSymbolicLink()}(t,{fs:e})}function dn(t){if(!Ur(t))return"";let e=cr(sn(t),".");if(Cr(e)<=1)return"";let r="";try{r=(o=null==(n=e)?0:n.length)?n[o-1]:void 0}catch(t){}var n,o;return r}let gn=t=>"png"===(t=ct(t).toLowerCase())?"image/png":"jpg"===t||"jpeg"===t?"image/jpeg":"gif"===t?"image/gif":"svg"===t?"image/svg+xml":"webp"===t?"image/webp":"application/octet-stream",yn=async t=>{let r=dn(t),n=(t=>{let r=e.readFileSync(t);return Buffer.from(r).toString("base64")})(t);return`data:${gn(r)};base64,${n}`},bn=async t=>{let r=await(async(t,r={})=>{let n=ht(r,"density");Kr(n)||(n=96),n=Xr(n);let o=ht(r,"returnBase64");Dr(o)||(o=!1);let i=e.readFileSync(t),u=await a(i,{density:n}).png().toBuffer(),f=u;o&&(f="data:image/png;base64,"+u.toString("base64"));return f})(t,{returnBase64:!0});return r},jn=async t=>{let e="";return e="svg"===dn(t)?await bn(t):await yn(t),e};return async function(a,c,l={}){if(!vn(a))return Promise.reject(`fpIn[${a}] does not exist`);let s=hn(a=t.resolve(a)),p=ht(l,"fpInTemp");if(!vn(p)){let t="./src/html.tmp",e="./node_modules/w-md2html/src/html.tmp";if(vn(t))p=t;else{if(!vn(e))throw new Error(`fpInTemp[${p}] does not exist`);p=e}}p=t.resolve(p);let h=ht(l,"imgWidthMax",null);Kr(h)&&(h=`${h}px`);let v=ht(l,"imgConvertToBase64",null);Dr(v)||(v=!0);let d=ht(l,"funProcFpOut"),g=(t,e)=>{let r=cr(t,"\n"),n=0,o=[],i={};Qt(r,t=>{let r=t;if(t.indexOf(`${e}n`)>=0){let o;n++,r=Yr(t,`${e}n`,`${e}${n}`),o=t,o=Yr(o,'<div style="margin:1rem 0;">',""),o=Yr(o,"</div>",""),o=Yr(o,`${e}n`,""),o=dr(o),o=`{${o}}`,i[o]=`${e}${n}`}o.push(r)});let u=yr(o,"\n");return Qt(i,(t,e)=>{u=u.replaceAll(e,t)}),u},y=ht(l,"fontFamilies",[]);var b,j,_;(!Vr(b=y)||0===b.length||1===b.length&&Jr(b[0]))&&(y=["Microsoft JhengHei","Avenir","Helvetica","Arial","sans-serif"]),y=yr((_=t=>`'${t}'`,(f(j=y)?it:Le)(j,De(_))),", ");let m=ht(l,"fontSizeUnit","");Ur(m)||(m="pt");let w=ht(l,"fontSizeScale","");Kr(w)||(w=1),w=Xr(w);let O=ht(l,"fontSizeDef","");Ur(O)||(O=12*w+m);let S=ht(l,"fontSizeH1","");Ur(S)||(S=20*w+m);let x=ht(l,"fontSizeH2","");Ur(x)||(x=16*w+m);let A=ht(l,"fontSizeH3","");Ur(A)||(A=14*w+m);let z=ht(l,"fontSizeH4","");Ur(z)||(z=12*w+m);let $=ht(l,"fontSizeH5","");Ur($)||($=12*w+m);let k=ht(l,"fontSizeH6","");Ur(k)||(k=12*w+m);let H=ht(l,"fontSizeP","");Ur(H)||(H=12*w+m);let F=ht(l,"fontSizeTab","");Ur(F)||(F=11*w+m);let P=ht(l,"fontSizeCode","");Ur(P)||(P=10*w+m);let E=ht(l,"textAlignH1","");Ur(E)||(E="left");let R=ht(l,"textAlignH2","");Ur(R)||(R="left");let T=ht(l,"textAlignH3","");Ur(T)||(T="left");let B=ht(l,"textAlignH4","");Ur(B)||(B="left");let M=ht(l,"textAlignH5","");Ur(M)||(M="left");let N=ht(l,"textAlignH6","");Ur(N)||(N="left");let I=e.readFileSync(p,"utf8"),q=pn(a),C=hn(a),D=e.readFileSync(a,"utf8"),L=(t=>{let e=cr(t,"\n"),r="";return Qt(e,(t,n)=>{if(t.indexOf(" pretitle ")>=0)return r=ht(e,n+1,""),r=dr(r),!1}),r})(D);D=g(D,"圖"),D=g(D,"表"),D=await(async(t,e)=>{let r=[],n=cr(e,"\n");return await Zr(n,async e=>{e.indexOf('src="')>=0&&(e=await(async e=>{let r=cr(e,'src="');if(2!==Cr(r))throw new Error("size(s)!==2");let n=r[0],o=cr(r[1],'"'),i=o[0],u="";if(vn(i))u=i;else if(u=`${t}/${i}`,!vn(u))throw console.log("c",e),console.log("fnp",i),new Error(`fp[${u}] does not exist`);let a=await jn(u);return o=Ar(o),n+'src="'+a+'"'+yr(o,'"')})(e)),r.push(e)}),r=yr(r,"\n"),r})(C,D);let U=new r.Marked;U.use(n({throwOnError:!1,nonStandard:!0})),U.use(o()),U.use(u.markedHighlight({langPrefix:"hljs language-",emptyLangClass:"hljs",highlight(t,e){let r=e&&i.getLanguage(e)?e:"plaintext";return i.highlight(t,{language:r}).value}}));let V={image:({href:t,title:e,text:r})=>{let n=Ur(e)?`title="${e}"`:"",o="";return Ur(h)&&(o=`max-width:${h}; height:auto;`),`<img src="${t}" alt="${r}" ${n} style="${o}">`}};U.use({async:!0,renderer:V,walkTokens:async e=>{if("image"===e.type&&v)try{let r=t.resolve(s,e.href);vn(r)?e.href=await jn(r):console.log(`href[${e.href}] does not exist`)}catch(t){console.log(t)}}});let W=I;return W=Yr(W,"{html}",await U.parse(D)),W=Yr(W,"{title}",q),W=Yr(W,"{fontFamilies}",y),W=Yr(W,"{fontSizeDef}",O),W=Yr(W,"{fontSizeH1}",S),W=Yr(W,"{fontSizeH2}",x),W=Yr(W,"{fontSizeH3}",A),W=Yr(W,"{fontSizeH4}",z),W=Yr(W,"{fontSizeH5}",$),W=Yr(W,"{fontSizeH6}",k),W=Yr(W,"{fontSizeP}",H),W=Yr(W,"{fontSizeTab}",F),W=Yr(W,"{fontSizeCode}",P),W=Yr(W,"{textAlignH1}",E),W=Yr(W,"{textAlignH2}",R),W=Yr(W,"{textAlignH3}",T),W=Yr(W,"{textAlignH4}",B),W=Yr(W,"{textAlignH5}",M),W=Yr(W,"{textAlignH6}",N),W=Yr(W,'<h2 id="footnote-label" class="sr-only">Footnotes</h2>','<h2 id="footnote-label" class="sr-only" style="height:0px; line-height:0px; min-height:0px; overflow:hidden;">Footnotes</h2>'),W=W.replaceAll("<li>",'<li style="margin:7px 0;">'),Qr(d)&&(c=d({fpOut:c,pretitle:L})),e.writeFileSync(c,W,"utf8"),"ok"}});
//# sourceMappingURL=w-md2html.umd.js.map
